!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"undefined"==typeof tnt&&(tnt={}),tnt.board=t("tnt.genome"),tnt.utils=t("tnt.utils"),tnt.tooltip=t("tnt.tooltip"),e.exports=t("./index.js")},{"./index.js":2,"tnt.genome":26,"tnt.tooltip":61,"tnt.utils":65}],2:[function(t,e,n){e.exports=targetGenomeBrowser=t("./src/targetGenomeBrowser.js")},{"./src/targetGenomeBrowser.js":73}],3:[function(t,e,n){e.exports=cttvApi=t("./src/cttvApi.js")},{"./src/cttvApi.js":20}],4:[function(t,e,n){(function(n,r){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function i(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){V=t}function c(t){K=t}function u(){var t=n.nextTick,e=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=setImmediate),function(){t(h)}}function l(){return function(){U(h)}}function f(){var t=0,e=new Q(h),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function p(){var t=new MessageChannel;return t.port1.onmessage=h,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(h,1)}}function h(){for(var t=0;$>t;t+=2){var e=et[t],n=et[t+1];e(n),et[t]=void 0,et[t+1]=void 0}$=0}function v(){try{var e=t,n=e("vertx");return U=n.runOnLoop||n.runOnContext,l()}catch(r){return d()}}function g(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function y(t){try{return t.then}catch(e){return it.error=e,it}}function b(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function w(t,e,n){K(function(t){var r=!1,o=b(n,e,function(n){r||(r=!0,e!==n?A(t,n):T(t,n))},function(e){r||(r=!0,R(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,R(t,o))},t)}function x(t,e){e._state===rt?T(t,e._result):e._state===ot?R(t,e._result):E(e,void 0,function(e){A(t,e)},function(e){R(t,e)})}function k(t,e){if(e.constructor===t.constructor)x(t,e);else{var n=y(e);n===it?R(t,it.error):void 0===n?T(t,e):i(n)?w(t,e,n):T(t,e)}}function A(t,e){t===e?R(t,_()):o(e)?k(t,e):T(t,e)}function j(t){t._onerror&&t._onerror(t._result),P(t)}function T(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&K(P,t))}function R(t,e){t._state===nt&&(t._state=ot,t._result=e,K(j,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&K(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?q(n,r,o,i):o(i);t._subscribers.length=0}}function O(){this.error=null}function C(t,e){try{return t(e)}catch(n){return at.error=n,at}}function q(t,e,n,r){var o,a,s,c,u=i(n);if(u){if(o=C(n,r),o===at?(c=!0,a=o.error,o=null):s=!0,e===o)return void R(e,m())}else o=r,s=!0;e._state!==nt||(u&&s?A(e,o):c?R(e,a):t===rt?T(e,o):t===ot&&R(e,o))}function S(t,e){try{e(function(e){A(t,e)},function(e){R(t,e)})}catch(n){R(t,n)}}function N(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(g),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?T(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&T(n.promise,n._result))):R(n.promise,n._validationError())}function z(t){return new st(this,t).promise}function I(t){function e(t){A(o,t)}function n(t){R(o,t)}var r=this,o=new r(g);if(!Y(t))return R(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,a=0;o._state===nt&&i>a;a++)E(r.resolve(t[a]),void 0,e,n);return o}function M(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(g);return A(n,t),n}function F(t){var e=this,n=new e(g);return R(n,t),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(t){this._id=pt++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==t&&(i(t)||B(),this instanceof L||G(),S(this,t))}function D(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=dt)}var H;H=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var U,V,X,Y=H,$=0,K=({}.toString,function(t,e){et[$]=t,et[$+1]=e,$+=2,2===$&&(V?V(h):X())}),J="undefined"!=typeof window?window:void 0,W=J||{},Q=W.MutationObserver||W.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),tt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,et=new Array(1e3);X=Z?u():Q?f():tt?p():void 0===J&&"function"==typeof t?v():d();var nt=void 0,rt=1,ot=2,it=new O,at=new O;N.prototype._validateInput=function(t){return Y(t)},N.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},N.prototype._init=function(){this._result=new Array(this.length)};var st=N;N.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,o=0;n._state===nt&&e>o;o++)t._eachEntry(r[o],o)},N.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;a(t)?t.constructor===r&&t._state!==nt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},N.prototype._settledAt=function(t,e,n){var r=this,o=r.promise;o._state===nt&&(r._remaining--,t===ot?R(o,n):r._result[e]=n),0===r._remaining&&T(o,r._result)},N.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){n._settledAt(rt,e,t)},function(t){n._settledAt(ot,e,t)})};var ct=z,ut=I,lt=M,ft=F,pt=0,dt=L;L.all=ct,L.race=ut,L.resolve=lt,L.reject=ft,L._setScheduler=s,L._setAsap=c,L._asap=K,L.prototype={constructor:L,then:function(t,e){var n=this,r=n._state;if(r===rt&&!t||r===ot&&!e)return this;var o=new this.constructor(g),i=n._result;if(r){var a=arguments[r-1];K(function(){q(r,o,a,i)})}else E(n,o,t,e);return o},"catch":function(t){return this.then(null,t)}};var ht=D,vt={Promise:dt,polyfill:ht};"function"==typeof define&&define.amd?define(function(){return vt}):"undefined"!=typeof e&&e.exports?e.exports=vt:"undefined"!=typeof this&&(this.ES6Promise=vt),ht()}).call(this)}).call(this,t("IrXUsu"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{IrXUsu:22}],5:[function(t,e,n){"use strict";!function(t,r){"function"==typeof define&&define.amd?define(function(){return t.httppleasepromises=r(t)}):"object"==typeof n?e.exports=r(t):t.httppleasepromises=r(t)}(this,function(t){return function(e){if(e=e||t&&t.Promise,!e)throw new Error("No Promise implementation found.");return{processRequest:function(t){var n,r,o=t.onload,i=t.onerror,a=new e(function(t,e){n=t,r=e});t.onload=function(t){var e;return o&&(e=o.apply(this,arguments)),n(t),e},t.onerror=function(t){var e;return i&&(e=i.apply(this,arguments)),r(t),e},t.then=function(){return a.then.apply(a,arguments)},t["catch"]=function(){return a["catch"].apply(a,arguments)}}}}})},{}],6:[function(t,e,n){"use strict";function r(t,e){var n=new Error(t);n.name="RequestError",this.name=n.name,this.message=n.message,n.stack&&(this.stack=n.stack),this.toString=function(){return this.message};for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}var o=t("./response");r.prototype=Error.prototype,r.create=function(t,e,n){var i=new r(t,n);return o.call(i,e),i},e.exports=r},{"./response":9}],7:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var i,d,h,v,g;for(n=new l(f(t,n)),o=0;o<e.length;o++)d=e[o],d.processRequest&&d.processRequest(n);for(o=0;o<e.length;o++)if(d=e[o],d.createXHR){i=d.createXHR(n);break}i=i||new a,n.xhr=i,h=p(s(function(t){clearTimeout(g),i.onload=i.onerror=i.onreadystatechange=i.ontimeout=i.onprogress=null;var a=t&&t.isHttpError?t:new u(n);for(o=0;o<e.length;o++)d=e[o],d.processResponse&&d.processResponse(a);t?n.onerror&&n.onerror(t):n.onload&&n.onload(a),r&&r(t,a)})),i.onreadystatechange=function(){if(!n.timedOut)if(n.aborted)h(c("Request aborted",n,{name:"Abort"}));else if(4===i.readyState){var t=Math.floor(i.status/100);if(2===t)h();else if(404!==i.status||n.errorOn404){var e;switch(t){case 4:e="Client";break;case 5:e="Server";break;default:e="HTTP"}var r=e+" Error: The server returned a status of "+i.status+' for the request "'+n.method.toUpperCase()+" "+n.url+'"';h(c(r,n))}else h()}},i.onload=function(){h()},i.onerror=function(){h(c("Internal XHR Error",n))},i.ontimeout=function(){},i.onprogress=function(){},i.open(n.method,n.url),n.timeout&&(g=setTimeout(function(){n.timedOut=!0,h(c("Request timeout",n,{name:"Timeout"}));try{i.abort()}catch(t){}},n.timeout));for(v in n.headers)n.headers.hasOwnProperty(v)&&i.setRequestHeader(v,n.headers[v]);return i.send(n.body),n}t=t||{},e=e||[];var i,d=["get","post","put","head","patch","delete"],h=function(t){return function(e,r){return e=new l(e),e.method=t,n(e,r)}};for(o=0;o<d.length;o++)i=d[o],n[i]=h(i);return n.plugins=function(){return e},n.defaults=function(n){return n?r(f(t,n),e):t},n.use=function(){var n=Array.prototype.slice.call(arguments,0);return r(t,e.concat(n))},n.bare=function(){return r()},n.Request=l,n.Response=u,n}var o,i=t("../plugins/cleanurl"),a=t("./xhr"),s=t("./utils/delay"),c=t("./error").create,u=t("./response"),l=t("./request"),f=t("xtend"),p=t("./utils/once");e.exports=r({},[i])},{"../plugins/cleanurl":14,"./error":6,"./request":8,"./response":9,"./utils/delay":10,"./utils/once":11,"./xhr":12,xtend:13}],8:[function(t,e,n){"use strict";function r(t){var e="string"==typeof t?{url:t}:t||{};this.method=e.method?e.method.toUpperCase():"GET",this.url=e.url,this.headers=e.headers||{},this.body=e.body,this.timeout=e.timeout||0,this.errorOn404=null!=e.errorOn404?e.errorOn404:!0,this.onload=e.onload,this.onerror=e.onerror}r.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this)},r.prototype.header=function(t,e){var n;for(n in this.headers)if(this.headers.hasOwnProperty(n)&&t.toLowerCase()===n.toLowerCase()){if(1===arguments.length)return this.headers[n];delete this.headers[n];break}return null!=e?(this.headers[t]=e,e):void 0},e.exports=r},{}],9:[function(t,e,n){"use strict";function r(t){var e,n,r,o=t.xhr;if(this.request=t,this.xhr=o,this.headers={},!t.aborted&&!t.timedOut){if(this.status=o.status||0,this.text=o.responseText,this.body=o.response||o.responseText,this.contentType=o.contentType||o.getResponseHeader&&o.getResponseHeader("Content-Type"),o.getAllResponseHeaders)for(n=o.getAllResponseHeaders().split("\n"),e=0;e<n.length;e++)(r=n[e].match(/\s*([^\s]+):\s+([^\s]+)/))&&(this.headers[r[1]]=r[2]);this.isHttpError=this.status>=400}}var o=t("./request");r.prototype.header=o.prototype.header,e.exports=r},{"./request":8}],10:[function(t,e,n){"use strict";e.exports=function(t){return function(){var e=Array.prototype.slice.call(arguments,0),n=function(){return t.apply(null,e)};setTimeout(n,0)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments)),e}}},{}],12:[function(t,e,n){e.exports=window.XMLHttpRequest},{}],13:[function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}e.exports=r},{}],14:[function(t,e,n){"use strict";e.exports={processRequest:function(t){t.url=t.url.replace(/[^%]+/g,function(t){return encodeURI(t)})}}},{}],15:[function(t,e,n){"use strict";var r=t("./jsonrequest"),o=t("./jsonresponse");e.exports={processRequest:function(t){r.processRequest.call(this,t),o.processRequest.call(this,t)},processResponse:function(t){o.processResponse.call(this,t)}}},{"./jsonrequest":16,"./jsonresponse":17}],16:[function(t,e,n){"use strict";e.exports={processRequest:function(t){var e=t.header("Content-Type"),n=e&&-1!==e.indexOf("application/json");(null==e||n)&&t.body&&(e||t.header("Content-Type","application/json"),t.body=JSON.stringify(t.body))}}},{}],17:[function(t,e,n){"use strict";e.exports={processRequest:function(t){var e=t.header("Accept");null==e&&t.header("Accept","application/json")},processResponse:function(t){if(t.contentType&&/^.*\/(?:.*\+)?json(;|$)/i.test(t.contentType)){var e="string"==typeof t.body?t.body:t.text;e&&(t.body=JSON.parse(e))}}}},{}],18:[function(t,e,n){e.exports=t("./src/api.js")},{"./src/api.js":19}],19:[function(t,e,n){var r=function(t){var e=function(){var t=[];return t.add_batch=function(e){t.unshift(e)},t.update=function(e,n){for(var r=0;r<t.length;r++)for(var o in t[r])if(o===e)return t[r][o]=n,!0;return!1},t.add=function(e,n){if(t.update(e,n));else{var r={};r[e]=n,t.add_batch(r)}},t.get=function(e){for(var n=0;n<t.length;n++)for(var r in t[n])if(r===e)return t[n][r]},t},n=e(),r=function(){};r.check=function(e,n,o){if(!(e instanceof Array))return"function"==typeof e?e.check(n,o):t[e].check(n,o),r;for(var i=0;i<e.length;i++)r.check(e[i],n,o)},r.transform=function(e,n){if(!(e instanceof Array))return"function"==typeof e?e.transform(n):t[e].transform(n),r;for(var o=0;o<e.length;o++)r.transform(e[o],n)};var o=function(e,r){var o=[],i=[],a=r.on_getter||function(){return n.get(e)},s=r.on_setter||function(t){for(var r=0;r<i.length;r++)t=i[r](t);for(var a=0;a<o.length;a++)if(!o[a].check(t)){var s=o[a].msg||"Value "+t+" doesn't seem to be valid for this method";throw s}n.add(e,t)},c=function(e){return arguments.length?(s(e),t):a()};c.check=function(t,e){return arguments.length?(o.push({check:t,msg:e}),this):o},c.transform=function(t){return arguments.length?(i.push(t),this):i},t[e]=c},i=function(t,e){if("object"==typeof t){n.add_batch(t);for(var r in t)o(r,e)}else n.add(t,e.default_value),o(t,e)};return r.getset=function(t,e){return i(t,{default_value:e}),r},r.get=function(t,e){var n=function(){throw"Method defined only as a getter (you are trying to use it as a setter"};return i(t,{default_value:e,on_setter:n}),r},r.set=function(t,e){var n=function(){throw"Method defined only as a setter (you are trying to use it as a getter"};return i(t,{default_value:e,on_getter:n}),r},r.method=function(e,n){if("object"==typeof e)for(var o in e)t[o]=e[o];else t[e]=n;return r},r};e.exports=n=r},{}],20:[function(t,e,n){var r=t("tnt.api"),o=t("httpplease"),i=t("httpplease-promises"),a=t("es6-promise").Promise,s=t("httpplease/plugins/json");jsonHttp=o.use(s).use(i(a)),o=o.use(i(a));var c=t("./structure.js"),u=function(){var t,e={token:void 0,appname:"",secret:"",expiry:void 0},n={verbose:!1,prefix:"https://www.targetvalidation.org/api/",version:"1.1",format:"json"},i=function(){var t=s.url.requestToken(e);return e.token=jsonHttp.get({url:t}),e.token},s={};s.call=function(r,c,u){function l(o){n.verbose&&console.log("   ======> Got a new token: "+o.body.token),e.token=o.body.token;var i,a={"Auth-token":o.body.token};return i=c?t.post({url:r,headers:a,body:c}):t.get({url:r,headers:a})}function f(t){switch(t.status){case 419:return n.verbose&&console.log("     --- Received an api error -- Possibly the token has expired ("+t.status+"), so I'll request a new one"),"string"==typeof e.token&&(e.token=void 0),s.call(r,c);case 429:n.verbose&&console.log("     --- Received an api error -- Probably too many calls made to the api ("+t.status+"), so I'll wait some time to fetch the data");var o=new a(function(t){setTimeout(function(){n.verbose&&console.log(" *** trying again after receiving a too many requests error"),t(s.call(r,c))},1e4)});return o;default:throw t}}if(u||(u="json"),t="json"===u?jsonHttp:o,!e.token&&!e.appname&&!e.secret)return n.verbose&&console.log("    CttvApi running in non-authentication mode"),c?t.post({url:r,body:c}):t.get({url:r});if(e.token){n.verbose&&console.log("Current token is: "+e.token);var p=new a(function(t){t({body:{token:e.token}})});return"string"!=typeof e.token&&(p=e.token),p.then(l)["catch"](f)}return n.verbose&&console.log("No credential token, requesting one..."),i().then(l)["catch"](f)},r(s).getset(e).getset(n),s.utils={},s.utils.flat2tree=c.flat2tree,s.url={};var u="public/evidence/filter?",l="public/association/filter?",f="public/search?",p="private/target/",d="private/disease/",h="public/auth/request_token?",v="private/autocomplete?",g="private/quicksearch?",_="private/target/expression?",m="proxy/generic/",y="private/target/";s.url.gene=function(t){return n.prefix+n.version+"/"+p+t.gene_id},s.url.target=function(t){return n.prefix+n.version+"/"+y+t.target_id},s.url.disease=function(t){return n.prefix+n.version+"/"+d+t.code},s.url.search=function(t){return n.prefix+n.version+"/"+f+b(t)},s.url.associations=function(t){return n.prefix+n.version+"/"+l+b(t)},s.url.filterby=function(t){return n.prefix+n.version+"/"+u+b(t)},s.url.requestToken=function(t){return n.prefix+n.version+"/"+h+"app_name="+t.appname+"&secret="+t.secret+(e.expiry?"&expiry="+e.expiry:"")},s.url.autocomplete=function(t){return n.prefix+n.version+"/"+v+b(t)},s.url.quickSearch=function(t){return n.prefix+n.version+"/"+g+b(t)},s.url.expression=function(t){return n.prefix+n.version+"/"+_+b(t)},s.url.proxy=function(t){return n.prefix+n.version+"/"+m+t.url};var b=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&(t[n].constructor===Array?e.push(n+"="+t[n].join("&"+n+"=")):e.push(n+"="+t[n]));return e.join("&")};return s};e.exports=u},{"./structure.js":21,"es6-promise":4,httpplease:7,"httpplease-promises":5,"httpplease/plugins/json":15,"tnt.api":18}],21:[function(t,e,n){function r(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r.disease.efo_info.path.length>1)for(var o=1;o<r.disease.efo_info.path.length;o++){var i=u(r);i.currPath=r.disease.efo_info.path[o],e.push(i)}r.currPath=r.disease.efo_info.path[0],e.push(r)}return e}function o(t,e,n){t.__id=t.disease.id,t.__name=t.disease.efo_info.label,t.name=t.disease.efo_info.label,t.__association_score=t.association_score.overall,t.__evidence_count=t.evidence_count.total;var r=t.currPath,o=s(r,e,t);if(delete t.currPath,o.__id===m&&r.length>1){var a=t.target.id+"-"+r[0],c=n[a];c||console.error("We do not have TA: "+a),c.__id=r[0],c.__name=c.disease.efo_info.label,c.name=c.disease.efo_info.label,c.__association_score=c.association_score.overall,c.__evidence_count=c.evidence_count.total,e.children||(e.children=[]),e.children.push(c),o=c}o.children||(o.children=[]),i(o.children,t)||o.children.push(t)}function i(t,e){for(var n=0;n<t.length;n++)if(t[n].__id===e.__id)return!0;return!1}function a(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r.id]=r}return e}function s(t,e,n){for(var r=e.children||[],o=0;o<t.length;o++){var i=!1;t:for(var a=0;a<r.length;a++){var s=r[a];if(s.__id===t[o]&&s.__id!==n.__id){e=s,r=s.children||[],i=!0;break t}}if(!i)return e}return e}function c(t,e){return t.currPath.length-e.currPath.length}function u(t){var e={__association_score:t.__association_score,__evidence_count:t.__evidence_count,id:t.id,__id:t.__id,__name:t.__name,target:{id:t.target.id,name:t.target.gene_info.name,symbol:t.target.gene_info.symbol},disease:l(t.disease),association_score:v(t.association_score),evidence_count:h(t.evidence_count)};return t.is_direct&&(e.is_direct=t.is_direct),e}function l(t){var e={id:t.id,efo_info:f(t.efo_info)};return e}function f(t){var e={label:t.label,path:d(t.path),therapeutic_area:p(t.therapeutic_area)};return e}function p(t){var e={codes:g(t.codes),labels:g(t.labels)};return e}function d(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function h(t){var e={total:t.total,datatype:_(t.datatype),datasource:_(t.datasource)};return e}function v(t){var e={overall:t.overall,datatypes:_(t.datatypes),datasources:_(t.datasources)};return e}function g(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function _(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var m="cttv_root",y=function(t){for(var e=t.data,n=t.therapeutic_areas,i=r(e),s=i.sort(c),u={__id:m,name:"cttv_disease",disease:{id:m,efo_info:{label:""}}},l=a(n),f=0;f<s.length;f++)o(s[f],u,l);return console.log("TREE..."),console.log(u),u};e.exports=n={flat2tree:y}},{}],22:[function(t,e,n){function r(){}var o=e.exports={};o.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],23:[function(t,e,n){(function(n,r){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function i(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(){}function c(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function u(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}function l(t,e){return"onerror"===t?void Tt.on("error",e):2!==arguments.length?Tt[t]:void(Tt[t]=e)}function f(){setTimeout(function(){for(var t,e=0;e<Rt.length;e++){t=Rt[e];var n=t.payload;n.guid=n.key+n.id,n.childGuid=n.key+n.childId,n.error&&(n.stack=n.error.stack),Tt.trigger(t.name,t.payload)}Rt.length=0},50)}function p(t,e,n){1===Rt.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:n&&n._id,label:e._label,timeStamp:kt(),error:Tt["instrument-with-stack"]?new Error(e._label):null}})&&f()}function d(t,e,n){var r=this,o=r._state;if(o===Bt&&!t||o===Gt&&!e)return Tt.instrument&&Et("chained",r,r),r;r._onError=null;var i=new r.constructor(A,n),a=r._result;if(Tt.instrument&&Et("chained",r,i),o){var s=arguments[o-1];Tt.async(function(){F(o,i,s,a)})}else N(r,i,t,e);return i}function h(t,e){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var r=new n(A,e);return O(r,t),r}function v(t,e,n){return t===Bt?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function g(t,e,n,r){this._instanceConstructor=t,this.promise=new t(A,r),this._abortOnReject=n,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?q(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&q(this.promise,this._result))):S(this.promise,this._validationError())}function _(t,e){return new Ct(this,t,!0,e).promise}function m(t,e){function n(t){O(i,t)}function r(t){S(i,t)}var o=this,i=new o(A,e);if(!xt(t))return S(i,new TypeError("You must pass an array to race.")),i;for(var a=t.length,s=0;i._state===Ft&&a>s;s++)N(o.resolve(t[s]),void 0,n,r);return i}function y(t,e){var n=this,r=new n(A,e);return S(r,t),r}function b(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function w(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function x(t,e){this._id=It++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],Tt.instrument&&Et("created",this),A!==t&&("function"!=typeof t&&b(),this instanceof x?B(this,t):w())}function k(){return new TypeError("A promises callback cannot return that same promise.")}function A(){}function j(t){try{return t.then}catch(e){return Lt.error=e,Lt}}function T(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function R(t,e,n){Tt.async(function(t){var r=!1,o=T(n,e,function(n){r||(r=!0,e!==n?O(t,n,void 0):q(t,n))},function(e){r||(r=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,S(t,o))},t)}function E(t,e){e._state===Bt?q(t,e._result):e._state===Gt?(e._onError=null,S(t,e._result)):N(e,void 0,function(n){e!==n?O(t,n,void 0):q(t,n)},function(e){S(t,e)})}function P(t,e,n){e.constructor===t.constructor&&n===Pt&&constructor.resolve===Ot?E(t,e):n===Lt?S(t,Lt.error):void 0===n?q(t,e):i(n)?R(t,e,n):q(t,e)}function O(t,e){t===e?q(t,e):o(e)?P(t,e,j(e)):q(t,e)}function C(t){t._onError&&t._onError(t._result),z(t)}function q(t,e){t._state===Ft&&(t._result=e,t._state=Bt,0===t._subscribers.length?Tt.instrument&&Et("fulfilled",t):Tt.async(z,t))}function S(t,e){t._state===Ft&&(t._state=Gt,t._result=e,Tt.async(C,t))}function N(t,e,n,r){var o=t._subscribers,i=o.length;t._onError=null,o[i]=e,o[i+Bt]=n,o[i+Gt]=r,0===i&&t._state&&Tt.async(z,t)}function z(t){var e=t._subscribers,n=t._state;if(Tt.instrument&&Et(n===Bt?"fulfilled":"rejected",t),0!==e.length){for(var r,o,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?F(n,r,o,i):o(i);t._subscribers.length=0}}function I(){this.error=null}function M(t,e){try{return t(e)}catch(n){return Dt.error=n,Dt}}function F(t,e,n,r){var o,a,s,c,u=i(n);if(u){if(o=M(n,r),o===Dt?(c=!0,a=o.error,o=null):s=!0,e===o)return void S(e,k())}else o=r,s=!0;e._state!==Ft||(u&&s?O(e,o):c?S(e,a):t===Bt?q(e,o):t===Gt&&S(e,o))}function B(t,e){var n=!1;try{e(function(e){n||(n=!0,O(t,e))},function(e){n||(n=!0,S(t,e))})}catch(r){S(t,r)}}function G(t,e,n){this._superConstructor(t,e,!1,n)}function L(t,e){return new G(Mt,t,e).promise}function D(t,e){return Mt.all(t,e)}function H(t,e){te[Yt]=t,te[Yt+1]=e,Yt+=2,2===Yt&&Ut()}function U(){var t=n.nextTick,e=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=setImmediate),function(){t(K)}}function V(){return function(){Ht(K)}}function X(){var t=0,e=new Wt(K),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function Y(){var t=new MessageChannel;return t.port1.onmessage=K,function(){t.port2.postMessage(0)}}function $(){return function(){setTimeout(K,1)}}function K(){for(var t=0;Yt>t;t+=2){var e=te[t],n=te[t+1];e(n),te[t]=void 0,te[t+1]=void 0}Yt=0}function J(){try{var e=t,n=e("vertx");return Ht=n.runOnLoop||n.runOnContext,V()}catch(r){return $()}}function W(t){var e={};return e.promise=new Mt(function(t,n){e.resolve=t,e.reject=n},t),e}function Q(t,e,n){return Mt.all(t,n).then(function(t){if(!i(e))throw new TypeError("You must pass a function as filter's second argument.");for(var r=t.length,o=new Array(r),a=0;r>a;a++)o[a]=e(t[a]);return Mt.all(o,n).then(function(e){for(var n=new Array(r),o=0,i=0;r>i;i++)e[i]&&(n[o]=t[i],o++);return n.length=o,n})})}function Z(t,e,n){this._superConstructor(t,e,!0,n)}function tt(t,e,n){this._superConstructor(t,e,!1,n)}function et(t,e){return new tt(Mt,t,e).promise}function nt(t,e){return new re(Mt,t,e).promise}function rt(t,e,n){return Mt.all(t,n).then(function(t){if(!i(e))throw new TypeError("You must pass a function as map's second argument.");for(var r=t.length,o=new Array(r),a=0;r>a;a++)o[a]=e(t[a]);return Mt.all(o,n)})}function ot(){this.value=void 0}function it(t){try{return t.then}catch(e){return ce.value=e,ce}}function at(t,e,n){try{t.apply(e,n)}catch(r){return ce.value=r,ce}}function st(t,e){for(var n,r,o={},i=t.length,a=new Array(i),s=0;i>s;s++)a[s]=t[s];for(r=0;r<e.length;r++)n=e[r],o[n]=a[r+1];return o}function ct(t){for(var e=t.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=t[r];return n}function ut(t,e){return{then:function(n,r){return t.call(e,n,r)}}}function lt(t,e){var n=function(){for(var n,r=this,o=arguments.length,i=new Array(o+1),a=!1,s=0;o>s;++s){if(n=arguments[s],!a){if(a=dt(n),a===ue){var c=new Mt(A);return S(c,ue.value),c}a&&a!==!0&&(n=ut(a,n))}i[s]=n}var u=new Mt(A);return i[o]=function(t,n){t?S(u,t):void 0===e?O(u,n):e===!0?O(u,ct(arguments)):xt(e)?O(u,st(arguments,e)):O(u,n)},a?pt(u,i,t,r):ft(u,i,t,r)};return n.__proto__=t,n}function ft(t,e,n,r){var o=at(n,r,e);return o===ce&&S(t,o.value),t}function pt(t,e,n,r){return Mt.all(e).then(function(e){var o=at(n,r,e);return o===ce&&S(t,o.value),t})}function dt(t){return t&&"object"==typeof t?t.constructor===Mt?!0:it(t):!1}function ht(t,e){return Mt.race(t,e)}function vt(t,e){return Mt.reject(t,e)}function gt(t,e){return Mt.resolve(t,e)}function _t(t){throw setTimeout(function(){throw t}),t}function mt(t,e){Tt.async(t,e)}function yt(){Tt.on.apply(Tt,arguments)}function bt(){Tt.off.apply(Tt,arguments)}var wt;wt=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var xt=wt,kt=Date.now||function(){return(new Date).getTime()},At=Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return s.prototype=t,new s},jt={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){if("function"!=typeof e)throw new TypeError("Callback must be a function");var n,r=u(this);n=r[t],n||(n=r[t]=[]),-1===c(n,e)&&n.push(e)},off:function(t,e){var n,r,o=u(this);return e?(n=o[t],r=c(n,e),void(-1!==r&&n.splice(r,1))):void(o[t]=[])},trigger:function(t,e,n){var r,o,i=u(this);if(r=i[t])for(var a=0;a<r.length;a++)(o=r[a])(e,n)}},Tt={instrument:!1};jt.mixin(Tt);var Rt=[],Et=p,Pt=d,Ot=h,Ct=g;g.prototype._validateInput=function(t){return xt(t)},g.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},g.prototype._init=function(){this._result=new Array(this.length)},g.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,r=0;e._state===Ft&&t>r;r++)this._eachEntry(n[r],r)},g.prototype._settleMaybeThenable=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===Ot){var o=j(t);if(o===Pt&&t._state!==Ft)t._onError=null,this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=this._makeResult(Bt,e,t);else if(n===Mt){var i=new n(A);P(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},g.prototype._eachEntry=function(t,e){a(t)?this._settleMaybeThenable(t,e):(this._remaining--,this._result[e]=this._makeResult(Bt,e,t))},g.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===Ft&&(this._remaining--,this._abortOnReject&&t===Gt?S(r,n):this._result[e]=this._makeResult(t,e,n)),0===this._remaining&&q(r,this._result)},g.prototype._makeResult=function(t,e,n){return n},g.prototype._willSettleAt=function(t,e){var n=this;N(t,void 0,function(t){n._settledAt(Bt,e,t)},function(t){n._settledAt(Gt,e,t)})};var qt=_,St=m,Nt=y,zt="rsvp_"+kt()+"-",It=0,Mt=x;x.cast=Ot,x.all=qt,x.race=St,x.resolve=Ot,x.reject=Nt,x.prototype={constructor:x,_guidKey:zt,_onError:function(t){var e=this;Tt.after(function(){e._onError&&Tt.trigger("error",t,e._label)})},then:Pt,"catch":function(t,e){return this.then(void 0,t,e)},"finally":function(t,e){var n=this,r=n.constructor;return n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){return r.reject(e)})},e)}};var Ft=void 0,Bt=1,Gt=2,Lt=new I,Dt=new I;G.prototype=At(Ct.prototype),G.prototype._superConstructor=Ct,G.prototype._makeResult=v,G.prototype._validationError=function(){return new Error("allSettled must be called with an array");
};var Ht,Ut,Vt=L,Xt=D,Yt=0,$t=({}.toString,H),Kt="undefined"!=typeof window?window:void 0,Jt=Kt||{},Wt=Jt.MutationObserver||Jt.WebKitMutationObserver,Qt="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),Zt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);Ut=Qt?U():Wt?X():Zt?Y():void 0===Kt&&"function"==typeof t?J():$();var ee=W,ne=Q,re=Z;Z.prototype=At(Ct.prototype),Z.prototype._superConstructor=Ct,Z.prototype._init=function(){this._result={}},Z.prototype._validateInput=function(t){return t&&"object"==typeof t},Z.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},Z.prototype._enumerate=function(){var t=this,e=t.promise,n=t._input,r=[];for(var o in n)e._state===Ft&&Object.prototype.hasOwnProperty.call(n,o)&&r.push({position:o,entry:n[o]});var i=r.length;t._remaining=i;for(var a,s=0;e._state===Ft&&i>s;s++)a=r[s],t._eachEntry(a.entry,a.position)},tt.prototype=At(re.prototype),tt.prototype._superConstructor=Ct,tt.prototype._makeResult=v,tt.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var oe,ie=et,ae=nt,se=rt,ce=new ot,ue=new ot,le=lt;if("object"==typeof self)oe=self;else{if("object"!=typeof r)throw new Error("no global: `self` or `global` found");oe=r}var fe=oe,pe=ht,de=vt,he=gt,ve=_t;Tt.async=$t,Tt.after=function(t){setTimeout(t,0)};if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var ge=window.__PROMISE_INSTRUMENTATION__;l("instrument",!0);for(var _e in ge)ge.hasOwnProperty(_e)&&yt(_e,ge[_e])}var me={race:pe,Promise:Mt,allSettled:Vt,hash:ae,hashSettled:ie,denodeify:le,on:yt,off:bt,map:se,filter:ne,resolve:he,reject:de,all:Xt,rethrow:ve,defer:ee,EventTarget:jt,configure:l,async:mt};"function"==typeof define&&define.amd?define(function(){return me}):"undefined"!=typeof e&&e.exports?e.exports=me:"undefined"!=typeof fe&&(fe.RSVP=me)}).call(this)}).call(this,t("IrXUsu"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{IrXUsu:22}],24:[function(t,e,n){e.exports=t(18)},{"./src/api.js":25}],25:[function(t,e,n){e.exports=t(19)},{}],26:[function(t,e,n){e.exports=t("./src/index.js")},{"./src/index.js":59}],27:[function(t,e,n){e.exports=t(18)},{"./src/api.js":28}],28:[function(t,e,n){e.exports=t(19)},{}],29:[function(t,e,n){e.exports=t("./src/index")},{"./src/index":33}],30:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").defer_cancel,i=function(){"use strict";function t(t){t.parentNode.appendChild(t)}var e,n,i,a,s,c=[],u=50,l=0,f=920,p=20,d={species:void 0,chr:void 0,from:0,to:500},h={left:void 0,right:void 0},v=3,g=d3.rgb("#F8FBEF"),_=d3.behavior.zoom(),m={min:0,max:1e3,zoom_out:1e3,zoom_in:100},y=500,b=!0,w={ease:d3.ease("cubic-in-out"),extend_canvas:{left:0,right:0},show_frame:!0},x=function(t){n=d3.select(t).attr("id"),d3.select(t).classed("tnt",!0);var r=d3.select(t).append("div").attr("id","tnt_"+n).style("position","relative").classed("tnt_framed",!!w.show_frame).style("width",f+2*v+w.extend_canvas.right+w.extend_canvas.left+"px"),o=r.append("div").attr("class","tnt_groupDiv");e=o.append("svg").attr("class","tnt_svg").attr("width",f).attr("height",l).attr("pointer-events","all"),a=e.append("g").attr("transform","translate(0,20)").append("g").attr("class","tnt_g"),h.left=a.append("rect").attr("id","tnt_"+n+"_5pcap").attr("x",0).attr("y",0).attr("width",0).attr("height",l).attr("fill","red"),h.right=a.append("rect").attr("id","tnt_"+n+"_3pcap").attr("x",f-v).attr("y",0).attr("width",0).attr("height",l).attr("fill","red"),i=a.append("rect").attr("class","tnt_pane").attr("id","tnt_"+n+"_pane").attr("width",f).attr("height",l).style("fill",g)},k=r(x).getset(w).getset(m).getset(d);k.transform(x.extend_canvas,function(t){var e=x.extend_canvas();return t.left=t.left||e.left,t.right=t.right||e.right,t}),k.method("start",function(){m.max-m.min<m.zoom_out&&(m.zoom_out=m.max-m.min),j();for(var t=0;t<c.length;t++)c[t].g&&c[t].g.remove(),E(c[t]);R();var e=function(){d.to-d.from<m.zoom_in&&(d.from+m.zoom_in>m.max?d.to=m.max:d.to=d.from+m.zoom_in);for(var t=0;t<c.length;t++)A(c[t],d)};e()}),k.method("update",function(){for(var t=0;t<c.length;t++)A(c[t])});var A=function(t,e){if(t.data()){var n=t.data(),r=n;r.call(t,{loc:e,on_success:function(){t.display().update.call(t,e)}})}},j=function(){s=d3.scale.linear().domain([d.from,d.to]).range([0,f]),b&&a.call(_.x(s).scaleExtent([(d.to-d.from)/(m.zoom_out-1),(d.to-d.from)/m.zoom_in]).on("zoom",q))},T=function(t){for(var e=[],n=0;n<t.length;n++){for(var r=!1,o=0;o<c.length;o++)if(c[o].id()===t[n].id()){r=!0,e[o]=!0;break}r||(E(t[n]),A(t[n],{from:d.from,to:d.to}))}for(var i=0;i<c.length;i++)e[i]||c[i].g.remove();c=t,R()};k.method("scroll",function(t){var e=Math.abs(t);t>0?P(e,1):0>t&&P(e,-1)}),k.method("zoom",function(t){P(1/t,0)}),k.method("find_track",function(t){for(var e=0;e<c.length;e++)if(c[e].id()===t)return c[e]}),k.method("remove_track",function(t){t.g.remove()}),k.method("add_track",function(t){if(t instanceof Array){for(var e=0;e<t.length;e++)x.add_track(t[e]);return x}return c.push(t),x}),k.method("tracks",function(t){return arguments.length?(T(t),this):c}),k.method("width",function(t){if(!arguments.length)return f;if(u>t&&(t=u),void 0!==n){d3.select("#tnt_"+n).select("svg").attr("width",t),d3.select("#tnt_"+n).style("width",parseInt(t)+2*v+"px"),d3.select("#tnt_"+n+"_pane").attr("width",t),h.right.attr("x",t-v),f=t,s.range([0,f]),j();for(var e=0;e<c.length;e++)c[e].g.select("rect").attr("width",t),c[e].display().scale(s),c[e].display().reset.call(c[e]),c[e].display().init.call(c[e],t),c[e].display().update.call(c[e],d)}else f=t;return x}),k.method("allow_drag",function(t){return arguments.length?(b=t,b?void 0!==s&&a.call(_.x(s).scaleExtent([(d.to-d.from)/(m.zoom_out-1),(d.to-d.from)/m.zoom_in]).on("zoom",q)):_.x(d3.scale.linear()).on("zoom",null),x):b});var R=function(){for(var r=0,o=0;o<c.length;o++){var a=c[o];a.g.attr("transform")?a.g.transition().duration(y).attr("transform","translate("+w.extend_canvas.left+","+r+")"):a.g.attr("transform","translate("+w.extend_canvas.left+","+r+")"),r+=a.height()}return e.attr("height",r+p),d3.select("#tnt_"+n).style("height",r+10+p+"px"),d3.select("#tnt_"+n+"_5pcap").attr("height",r).each(function(e){t(this)}),d3.select("#tnt_"+n+"_3pcap").attr("height",r).each(function(e){t(this)}),i.attr("height",r+p),x},E=function(t){return t.g=e.select("g").select("g").append("g").attr("class","tnt_track").attr("height",t.height()),t.g.append("rect").attr("x",0).attr("y",0).attr("width",x.width()).attr("height",t.height()).style("fill",t.color()).style("pointer-events","none"),t.display()&&t.display().scale(s).init.call(t,f),x},P=function(t,e){var n,r=s.domain(),o=r[1]-r[0],i=o*t-o;switch(e){case 1:n=[~~r[0]-i,~~(r[1]-i)];break;case-1:n=[~~r[0]+i,~~(r[1]-i)];break;case 0:n=[r[0]-~~(i/2),r[1]+~~i/2]}var a=d3.interpolateNumber(r[0],n[0]),c=w.ease,u=0;d3.timer(function(){var t,n=a(c(u));switch(e){case-1:t=n+o;break;case 1:t=n+o;break;case 0:t=r[1]+r[0]-n}var i=[n,t];return s.domain(i),q(s),u+=.02,u>1})},O=function(){var t=s.domain();x.from(~~t[0]),x.to(~~t[1]);for(var e=0;e<c.length;e++){var n=c[e];A(n,d)}},C=o(O,300),q=function(t){void 0!==t&&b&&_.x(t);var e=s.domain();e[0]<=m.min+5&&d3.select("#tnt_"+n+"_5pcap").attr("width",v).transition().duration(200).attr("width",0),e[1]>=m.max-5&&d3.select("#tnt_"+n+"_3pcap").attr("width",v).transition().duration(200).attr("width",0),e[0]<m.min?_.translate([_.translate()[0]-s(m.min)+s.range()[0],_.translate()[1]]):e[1]>m.max&&_.translate([_.translate()[0]-s(m.max)+s.range()[1],_.translate()[1]]),C();for(var r=0;r<c.length;r++){var o=c[r];o.display().mover.call(o)}};return x};e.exports=n=i},{"tnt.api":27,"tnt.utils":65}],31:[function(t,e,n){var r=t("tnt.api"),o=t("./spinner.js")();tnt_data={},tnt_data.sync=function(){var t=function(e){var n=this;n.data().elements(t.retriever().call(n,e.loc)),e.on_success()};return r(t).getset("elements",[]).getset("retriever",function(){}),t},tnt_data.async=function(){var t=function(e){var n=this;o.on.call(n),t.retriever().call(n,e.loc).then(function(t){n.data().elements(t),e.on_success(),o.off.call(n)})};r(t).getset("elements",[]).getset("retriever");return t},tnt_data.empty=function(){var t=tnt_data.sync();return t},e.exports=n=tnt_data},{"./spinner.js":35,"tnt.api":27}],32:[function(t,e,n){var r=t("tnt.api"),o=t("./layout.js"),i=function(){var t=d3.dispatch("click","dblclick","mouseover","mouseout"),e={create:function(){throw"create_elem is not defined in the base feature object"},move:function(){throw"move_elem is not defined in the base feature object"},distribute:function(){},fixed:function(){},index:void 0,layout:o.identity(),color:"#000",scale:void 0},n={},i=function(){var t=this;t.g.selectAll(".tnt_elem").remove(),t.g.selectAll(".tnt_guider").remove()},a=function(t){var n=this;n.g.append("text").attr("x",5).attr("y",12).attr("font-size",11).attr("fill","grey").text(n.label()),e.fixed.call(n,t)},s=function(n,r,o){n.on("click",function(e,n){d3.event.defaultPrevented||t.click.call(this,e,n)}),n.on("mouseover",function(e,n){d3.event.defaultPrevented||t.mouseover.call(this,e,n)}),n.on("dblclick",function(e,n){d3.event.defaultPrevented||t.dblclick.call(this,e,n)}),n.on("mouseout",function(e,n){d3.event.defaultPrevented||t.mouseout.call(this,e,n)}),e.create.call(r,n,o)},c=function(t,r){var o=this,i=o.g,a=o.data().elements();void 0!==r&&(a=a[r]);var s=e.layout.call(o,a);if(void 0!==s){var c,u;c=void 0!==r?i.selectAll(".tnt_elem_"+r):i.selectAll(".tnt_elem"),u=e.index?c.data(s,function(t){return void 0!==t?e.index(t):void 0}):c.data(s),e.distribute.call(o,u,e.scale);var l=u.enter();l.append("g").attr("class","tnt_elem").classed("tnt_elem_"+r,r).call(n.plot,o,e.scale),u.exit().remove()}},u=function(t){var n,r=this,o=r.g;n=void 0!==t?o.selectAll(".tnt_elem_"+t):o.selectAll(".tnt_elem"),e.move.call(this,n)},l=function(t){t.parentNode.appendChild(t)},f=function(t){if(void 0!==t){var e=this,n=e.g;n.selectAll(".tnt_elem_"+t).each(function(){l(this)})}};return r(n).getset(e).method({reset:i,plot:s,update:c,mover:u,init:a,move_to_front:f}),d3.rebind(n,t,"on")};i.composite=function(){var t={},e=[],n={},o=function(){for(var e=this,n=0;n<t.length;n++)t[n].reset.call(e)},i=function(e){var r=this;for(var o in t)t.hasOwnProperty(o)&&(t[o].scale(n.scale()),t[o].init.call(r,e))},a=function(){for(var n=this,r=0;r<e.length;r++)t[e[r]].update.call(n,void 0,e[r]),t[e[r]].move_to_front.call(n,e[r])},s=function(){var e=this;for(var n in t)t.hasOwnProperty(n)&&t[n].mover.call(e,n)},c=function(r,o){return t[r]=o,e.push(r),n},u=function(){for(var n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n};return r(n).getset("scale").method({reset:o,update:a,mover:s,init:i,add:c,displays:u}),n},i.area=function(){var t,e=i.line(),n=e.line(),r=d3.svg.area().interpolate(n.interpolate()).tension(e.tension()),o=e.create();e.create(function(i){var a=this,s=e.scale();void 0!==t&&a.g.select("path").remove(),o.call(a,i,s),r.x(n.x()).y1(n.y()).y0(a.height()),t=i.data(),i.remove(),a.g.append("path").attr("class","tnt_area").classed("tnt_elem",!0).datum(t).attr("d",r).attr("fill",d3.rgb(e.color()).brighter())});var a=e.move();return e.move(function(o){var i=this,s=e.scale();a.call(i,o,s),r.x(n.x()),i.g.select(".tnt_area").datum(t).attr("d",r)}),e},i.line=function(){var t=i(),e=function(t){return t.pos},n=function(t){return t.val},r=.7,o=d3.scale.linear(),a=d3.svg.line().interpolate("basis");t.line=function(){return a},t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(e){return arguments.length?(n=e,t):n},t.tension=function(e){return arguments.length?(r=e,t):r};var s;return t.create(function(i){var c=this,u=t.scale();void 0!==s&&c.g.select("path").remove(),a.tension(r).x(function(t){return u(e(t))}).y(function(t){return c.height()-o(n(t))}),s=i.data(),i.remove(),o.domain([0,1]).range([0,c.height()-2]),c.g.append("path").attr("class","tnt_elem").attr("d",a(s)).style("stroke",t.color()).style("stroke-width",4).style("fill","none")}),t.move(function(n){var r=this,o=t.scale();a.x(function(t){return o(e(t))}),r.g.select("path").attr("d",a(s))}),t},i.conservation=function(){var t=i.area(),e=t.create();return t.create(function(n){var r=this,o=t.scale();e.call(r,d3.select(n[0][0]),o)}),t},i.ensembl=function(){var t=i(),e="#7FFF00",n="#00BB00";return t.fixed(function(e){var n=this,r=~~(n.height()-.8*n.height())/2;n.g.append("line").attr("class","tnt_guider").attr("x1",0).attr("x2",e).attr("y1",r).attr("y2",r).style("stroke",t.color()).style("stroke-width",1),n.g.append("line").attr("class","tnt_guider").attr("x1",0).attr("x2",e).attr("y1",n.height()-r).attr("y2",n.height()-r).style("stroke",t.color()).style("stroke-width",1)}),t.create(function(e){var n=this,r=t.scale(),o=~~(n.height()-.8*n.height())/2;e.append("rect").attr("x",function(t){return r(t.start)}).attr("y",o).attr("width",function(t){return r(t.end)-r(t.start)}).attr("height",n.height()-~~(2*o)).attr("fill",n.color()).transition().duration(500).attr("fill",function(e){return"high"===e.type?d3.rgb(t.color()):"low"===e.type?d3.rgb(t.color2()):d3.rgb(t.color3())})}),t.distribute(function(e){var n=t.scale();e.select("rect").attr("width",function(t){return n(t.end)-n(t.start)})}),t.move(function(e){var n=t.scale();e.select("rect").attr("x",function(t){return n(t.start)}).attr("width",function(t){return n(t.end)-n(t.start)})}),t.color2=function(n){return arguments.length?(e=n,t):e},t.color3=function(e){return arguments.length?(n=e,t):n},t},i.vline=function(){var t=i();return t.create(function(e){var n=t.scale(),r=this;e.append("line").attr("x1",function(e){return n(t.index()(e))}).attr("x2",function(e){return n(t.index()(e))}).attr("y1",0).attr("y2",r.height()).attr("stroke",t.color()).attr("stroke-width",1)}),t.move(function(e){var n=t.scale();e.select("line").attr("x1",function(e){return n(t.index()(e))}).attr("x2",function(e){return n(t.index()(e))})}),t},i.pin=function(){var t=i(),e=d3.scale.linear().domain([0,0]).range([0,0]),n={pos:d3.functor("pos"),val:d3.functor("val"),domain:[0,0]},o=5;return r(t).getset(n),t.create(function(r){var i=this,a=t.scale();e.domain(t.domain()).range([o,i.height()-o-10]),r.append("line").attr("x1",function(t,e){return a(t[n.pos(t,e)])}).attr("y1",function(t){return i.height()}).attr("x2",function(t,e){return a(t[n.pos(t,e)])}).attr("y2",function(t,r){return i.height()-e(t[n.val(t,r)])}).attr("stroke",function(e){return d3.functor(t.color())(e)}),r.append("circle").attr("cx",function(t,e){return a(t[n.pos(t,e)])}).attr("cy",function(t,r){return i.height()-e(t[n.val(t,r)])}).attr("r",o).attr("fill",function(e){return d3.functor(t.color())(e)}),r.append("text").attr("font-size","13").attr("x",function(t,e){return a(t[n.pos(t,e)])}).attr("y",function(t,e){return 10}).style("text-anchor","middle").text(function(t){return t.label||""})}),t.distribute(function(t){t.select("text").text(function(t){return t.label||""})}),t.move(function(r){var o=this,i=t.scale();r.select("line").attr("x1",function(t,e){return i(t[n.pos(t,e)])}).attr("y1",function(t){return o.height()}).attr("x2",function(t,e){return i(t[n.pos(t,e)])}).attr("y2",function(t,r){return o.height()-e(t[n.val(t,r)])}),r.select("circle").attr("cx",function(t,e){return i(t[n.pos(t,e)])}).attr("cy",function(t,r){return o.height()-e(t[n.val(t,r)])}),r.select("text").attr("x",function(t,e){return i(t[n.pos(t,e)])}).text(function(t){return t.label||""})}),t.fixed(function(t){var e=this;e.g.append("line").attr("x1",0).attr("x2",t).attr("y1",e.height()).attr("y2",e.height()).style("stroke","black").style("stroke-with","1px")}),t},i.block=function(){var t=i();return r(t).getset("from",function(t){return t.start}).getset("to",function(t){return t.end}),t.create(function(e){var n=this,r=t.scale();e.append("rect").attr("x",function(e,n){return r(t.from()(e,n))}).attr("y",0).attr("width",function(e,n){return r(t.to()(e,n))-r(t.from()(e,n))}).attr("height",n.height()).attr("fill",n.color()).transition().duration(500).attr("fill",function(e){return void 0===e.color?t.color():e.color})}),t.distribute(function(e){var n=t.scale();e.select("rect").attr("width",function(t){return n(t.end)-n(t.start)})}),t.move(function(e){var n=t.scale();e.select("rect").attr("x",function(t){return n(t.start)}).attr("width",function(t){return n(t.end)-n(t.start)})}),t},i.axis=function(){var t,e,n="top",r={};return r.reset=function(){t=void 0;var e=this;e.g.selectAll("rect").remove(),e.g.selectAll(".tick").remove()},r.plot=function(){},r.mover=function(){var e=this,n=e.g;n.call(t)},r.init=function(){t=void 0},r.update=function(){void 0===t&&(t=d3.svg.axis().scale(e).orient(n));var r=this,o=r.g;o.call(t)},r.orientation=function(t){return arguments.length?(n=t,this):n},r.scale=function(t){return arguments.length?(e=t,this):e},r},i.location=function(){var t,e,n={};return n.reset=function(){t=void 0},n.plot=function(){},n.init=function(){t=void 0},n.mover=function(){var n=e.domain();t.select("text").text("Location: "+~~n[0]+"-"+~~n[1])},n.scale=function(t){return arguments.length?(e=t,this):e},n.update=function(n){var r=this,o=r.g,i=e.domain();void 0===t&&(t=o,t.append("text").text("Location: "+Math.round(i[0])+"-"+Math.round(i[1])))},n},e.exports=n=i},{"./layout.js":34,"tnt.api":27}],33:[function(t,e,n){var r=t("./board.js");r.track=t("./track"),r.track.data=t("./data.js"),r.track.layout=t("./layout.js"),r.track.feature=t("./feature.js"),r.track.layout=t("./layout.js"),e.exports=n=r},{"./board.js":30,"./data.js":31,"./feature.js":32,"./layout.js":34,"./track":36}],34:[function(t,e,n){var r=t("tnt.api"),o=function(){var t=function(e){var n=this;return t.elements().call(n,e),e};r(t).getset("elements",function(){});return t};o.identity=function(){return o().elements(function(t){return t})},e.exports=n=o},{"tnt.api":27}],35:[function(t,e,n){var r=function(){function t(t,e,n){t.append("rect").attr("x","46.5").attr("y","40").attr("width","7").attr("height","20").attr("rx","5").attr("ry","5").attr("fill",d3.rgb(n).darker(2)).attr("transform","rotate("+30*e+" 50 50) translate(0 -30)").append("animate").attr("attributeName","opacity").attr("from","1").attr("to","0").attr("dur","1s").attr("begin",1/12*e+"s").attr("repeatCount","indefinite")}var e,n={};return n.on=function(){var n=this;if(n.spinner?n.spinner++:n.spinner=1,1==n.spinner){var r=n.g,o=n.color();e=r.append("svg").attr("class","tnt_spinner").attr("width","30px").attr("height","30px").attr("xmls","http://www.w3.org/2000/svg").attr("viewBox","0 0 100 100").attr("preserveAspectRatio","xMidYMid"),e.append("rect").attr("x","0").attr("y","0").attr("width","100").attr("height","100").attr("rx","50").attr("ry","50").attr("fill",o);for(var i=0;12>i;i++)t(e,i,o)}else if(n.spinner>0){var a=e.node();a.parentNode&&a.parentNode.appendChild(a)}},n.off=function(){var t=this;if(t.spinner--,!t.spinner){var e=t.g;e.selectAll(".tnt_spinner").remove()}},n};e.exports=n=r},{}],36:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.utils").iterator,i=function(){"use strict";var t,e={color:d3.rgb("#CCCCCC"),height:250,data:i.data.empty(),label:"",id:i.id()},n={};r(n).getset(e);return n.display=function(n){if(!arguments.length)return t;if(t=n,"function"==typeof t)t.layout&&t.layout().height(e.height);else for(var r in t)t.hasOwnProperty(r)&&t[r].layout&&t[r].layout().height(e.height);return this},n};i.id=o(1),e.exports=n=i},{"tnt.api":27,"tnt.utils":65}],37:[function(t,e,n){e.exports=tnt_rest=t("./src/rest.js")},{"./src/rest.js":54}],38:[function(t,e,n){(function(n,r){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function i(t){return"function"==typeof t}function a(t){V=t}function s(t){K=t}function c(){return function(){n.nextTick(d)}}function u(){return function(){U(d)}}function l(){var t=0,e=new Q(d),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function f(){var t=new MessageChannel;return t.port1.onmessage=d,function(){t.port2.postMessage(0)}}function p(){return function(){setTimeout(d,1)}}function d(){for(var t=0;$>t;t+=2){var e=et[t],n=et[t+1];e(n),et[t]=void 0,et[t+1]=void 0}$=0}function h(){try{var e=t,n=e("vertx");return U=n.runOnLoop||n.runOnContext,u()}catch(r){return p()}}function v(t,e){var n=this,r=n._state;if(r===it&&!t||r===at&&!e)return this;var o=new this.constructor(_),i=n._result;if(r){var a=arguments[r-1];K(function(){S(r,o,a,i)})}else P(n,o,t,e);return o}function g(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(_);return j(n,t),n}function _(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(t){try{return t.then}catch(e){return st.error=e,st}}function w(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function x(t,e,n){K(function(t){var r=!1,o=w(n,e,function(n){r||(r=!0,e!==n?j(t,n):R(t,n))},function(e){r||(r=!0,E(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,E(t,o))},t)}function k(t,e){e._state===it?R(t,e._result):e._state===at?E(t,e._result):P(e,void 0,function(e){j(t,e)},function(e){E(t,e)})}function A(t,e,n){e.constructor===t.constructor&&n===nt&&constructor.resolve===rt?k(t,e):n===st?E(t,st.error):void 0===n?R(t,e):i(n)?x(t,e,n):R(t,e)}function j(t,e){t===e?E(t,m()):o(e)?A(t,e,b(e)):R(t,e)}function T(t){t._onerror&&t._onerror(t._result),O(t)}function R(t,e){t._state===ot&&(t._result=e,t._state=it,0!==t._subscribers.length&&K(O,t))}function E(t,e){t._state===ot&&(t._state=at,t._result=e,K(T,t))}function P(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+it]=n,o[i+at]=r,0===i&&t._state&&K(O,t)}function O(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?S(n,r,o,i):o(i);t._subscribers.length=0}}function C(){this.error=null}function q(t,e){try{return t(e)}catch(n){return ct.error=n,ct}}function S(t,e,n,r){var o,a,s,c,u=i(n);if(u){if(o=q(n,r),o===ct?(c=!0,a=o.error,o=null):s=!0,e===o)return void E(e,y())}else o=r,s=!0;e._state!==ot||(u&&s?j(e,o):c?E(e,a):t===it?R(e,o):t===at&&E(e,o))}function N(t,e){try{e(function(e){j(t,e)},function(e){E(t,e)})}catch(n){E(t,n)}}function z(t){return new ht(this,t).promise}function I(t){function e(t){j(o,t)}function n(t){E(o,t)}var r=this,o=new r(_);if(!Y(t))return E(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,a=0;o._state===ot&&i>a;a++)P(r.resolve(t[a]),void 0,e,n);return o}function M(t){var e=this,n=new e(_);return E(n,t),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(t){this._id=pt++,this._state=void 0,this._result=void 0,this._subscribers=[],_!==t&&("function"!=typeof t&&F(),this instanceof G?N(this,t):B())}function L(t,e){this._instanceConstructor=t,this.promise=new t(_),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&R(this.promise,this._result))):E(this.promise,this._validationError())}function D(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=dt)}var H;H=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var U,V,X,Y=H,$=0,K=function(t,e){et[$]=t,et[$+1]=e,$+=2,2===$&&(V?V(d):X())},J="undefined"!=typeof window?window:void 0,W=J||{},Q=W.MutationObserver||W.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),tt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,et=new Array(1e3);X=Z?c():Q?l():tt?f():void 0===J&&"function"==typeof t?h():p();var nt=v,rt=g,ot=void 0,it=1,at=2,st=new C,ct=new C,ut=z,lt=I,ft=M,pt=0,dt=G;G.all=ut,G.race=lt,G.resolve=rt,G.reject=ft,G._setScheduler=a,G._setAsap=s,G._asap=K,G.prototype={constructor:G,then:nt,"catch":function(t){return this.then(null,t)}};var ht=L;L.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},L.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ot&&t>n;n++)this._eachEntry(e[n],n)},L.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===rt){var o=b(t);if(o===nt&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===dt){var i=new n(_);A(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},L.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===ot&&(this._remaining--,t===at?E(r,n):this._result[e]=n),0===this._remaining&&R(r,this._result)},L.prototype._willSettleAt=function(t,e){var n=this;P(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(at,e,t)})};var vt=D,gt={Promise:dt,polyfill:vt};"function"==typeof define&&define.amd?define(function(){return gt}):"undefined"!=typeof e&&e.exports?e.exports=gt:"undefined"!=typeof this&&(this.ES6Promise=gt),vt()}).call(this)}).call(this,t("IrXUsu"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{IrXUsu:22}],39:[function(t,e,n){e.exports=t(5)},{}],40:[function(t,e,n){e.exports=t(6)},{"./response":43}],41:[function(t,e,n){e.exports=t(7)},{"../plugins/cleanurl":48,"./error":40,"./request":42,"./response":43,"./utils/delay":44,"./utils/once":45,"./xhr":46,xtend:47}],42:[function(t,e,n){e.exports=t(8)},{}],43:[function(t,e,n){e.exports=t(9)},{"./request":42}],44:[function(t,e,n){e.exports=t(10)},{}],45:[function(t,e,n){e.exports=t(11)},{}],46:[function(t,e,n){e.exports=t(12)},{}],47:[function(t,e,n){e.exports=t(13)},{}],48:[function(t,e,n){e.exports=t(14)},{}],49:[function(t,e,n){e.exports=t(15)},{"./jsonrequest":50,"./jsonresponse":51}],50:[function(t,e,n){e.exports=t(16)},{}],51:[function(t,e,n){e.exports=t(17)},{}],52:[function(t,e,n){e.exports=t(18)},{"./src/api.js":53}],53:[function(t,e,n){e.exports=t(19)},{}],54:[function(t,e,n){var r=t("httpplease"),o=t("tnt.api"),i=t("httpplease-promises"),a=t("es6-promise").Promise,s=t("httpplease/plugins/json");r=r.use(s).use(i(a)),tnt_rest=function(){var e={prefix:"",protocol:"http",domain:"",port:""},n={};n.url=t("./url.js");var i=o(n).getset(e);return i.method("call",function(t,n){var o;return"string"==typeof t?o=t:(t._prefix(e.prefix)._protocol(e.protocol)._domain(e.domain)._port(e.port),o=t()),n?r.post({url:o,body:n}):r.get({url:o})}),n},e.exports=n=tnt_rest},{"./url.js":55,"es6-promise":38,httpplease:41,"httpplease-promises":39,"httpplease/plugins/json":49,"tnt.api":52}],55:[function(t,e,n){var r=t("tnt.api"),o=function(){function t(e){var n=i.parameters[e];if(!Array.isArray(n))return n;var r=n.shift();return n.length?r+"&"+e+"="+t(e):r}function e(){void 0===i.parameters["content-type"]&&(i.parameters["content-type"]="application/json");var e=Object.keys(i.parameters).map(function(e){return e+"="+t(e)}).join("&");return e?"?"+e:e}function n(){var t=i.endpoint,n=t.replace(o,function(t){t=t.substring(1,t.length);var e=i.parameters[t]||"";return delete i.parameters[t],e}),r=i._prefix+(i._protocol?i._protocol+"://":"")+i._domain+(i._port?":"+i._port:"")+"/"+n+e()+(i.fragment?"#"+i.fragment:"");return r}var o=/:\w+/g,i={_prefix:"",_protocol:"http",_domain:"",_port:"",endpoint:"",parameters:{},fragment:"",rest:void 0},a=function(){return n()};r(a).getset(i);return a};e.exports=n=o},{"tnt.api":52}],56:[function(t,e,n){var r=t("tnt.board"),o=t("tnt.api"),i=function(){var t=r.track.data.genome.ensembl,e=r.track.data.async().retriever(function(e){var n=t.url().endpoint("overlap/region/:species/:region").parameters({species:e.species,region:e.chr+":"+e.from+"-"+e.to,feature:e.features||["gene"]});return t.call(n).then(function(t){for(var e=t.body,n=0;n<e.length;n++){var r=e[n];-1===r.strand?r.display_label="<"+r.external_name:r.display_label=r.external_name+">"}return e})});return o(e).getset("ensembl"),e},a=function(){function t(t){for(var e=t.exons,n=[],r=0;r<e.length-1;r++){var o={start:1===e[r].transcript.strand?e[r].end:e[r].start,end:1===e[r].transcript.strand?e[r+1].start:e[r+1].end,transcript:t};n.push(o)}return n}function e(t){var e,n;void 0!==t.Translation&&(e=t.Translation.start,n=t.Translation.end);var r=t.Exon,o=[];if(r)for(var i=0;i<r.length;i++)if(void 0===t.Translation)o.push({start:r[i].start,end:r[i].end,transcript:t,coding:!1,offset:r[i].start-t.start});else if(r[i].start<e)if(r[i].end<e)o.push({start:r[i].start,end:r[i].end,transcript:t,coding:!1,offset:r[i].start-t.start});else{var a={start:r[i].start,end:e,transcript:t,coding:!1,offset:r[i].start-t.start},s={start:e,end:r[i].end,transcript:t,coding:!0,offset:e-t.start};1===r[i].strand?(o.push(a),o.push(s)):(o.push(s),o.push(a))}else if(r[i].end>n)if(r[i].start>n)o.push({start:r[i].start,end:r[i].end,transcript:t,coding:!1,offset:r[i].start-t.start});else{var c={start:r[i].start,end:n,transcript:t,coding:!0,offset:r[i].start-t.start},u={start:n,end:r[i].end,transcript:t,coding:!1,offset:n-t.start};1===r[i].strand?(o.push(c),o.push(u)):(o.push(u),o.push(c))}else o.push({start:r[i].start,end:r[i].end,transcript:t,coding:!0,offset:r[i].start-t.start});return o}var n=r.track.data.genome.ensembl,i=r.track.data.async().retriever(function(t){var e=n.url().endpoint("overlap/region/:species/:region").parameters({species:t.species,region:t.chr+":"+t.from+"-"+t.to,feature:["gene","transcript","exon","cds"]});return n.call(e).then(function(t){for(var e=t.body,n=i.region2genes(e),r=[],o=0;o<n.length;o++){var a=n[o],s=i.gene2Transcripts(a);r=r.concat(s)}return r})});return o(i).method("gene2Transcripts",function(n){for(var r=n.Transcript,o=[],i=0;i<r.length;i++){var a=r[i];a.exons=e(a),a.introns=t(a),a.display_label=1===a.strand?a.display_name+">":"<"+a.display_name,a.key=a.id+"_"+a.exons.length,a.gene=n,o.push(a)}return o}).method("region2genes",function(t){for(var e={},n=[],r={},o=0;o<t.length;o++){var i=t[o];"transcript"==i.feature_type&&(i.display_name=i.external_name,r[i.id]=i,void 0===e[i.Parent]&&(e[i.Parent]=[]),e[i.Parent].push(i))}for(var a=0;a<t.length;a++){var i=t[a];if("exon"===i.feature_type){var s=r[i.Parent];void 0===s.Exon&&(s.Exon=[]),s.Exon.push(i)}}for(var c=0;c<t.length;c++){var i=t[c];if("cds"===i.feature_type){var s=r[i.Parent];void 0===s.Translation&&(s.Translation=i),i.start<s.Translation.start&&(s.Translation.start=i.start),i.end>s.Translation.end&&(s.Translation.end=i.end)}}for(var u=0;u<t.length;u++){var i=t[u];"gene"===i.feature_type&&(i.display_name=i.external_name,i.Transcript=e[i.id],n.push(i))}return n}),i},s=function(){var t=r.track.data.genome.ensembl,e=r.track.data.async().retriever(function(n){if(n.to-n.from<e.limit()){var r=t.url().endpoint("/sequence/region/:species/:region").parameters({species:n.species,region:n.chr+":"+n.from+".."+n.to});return t.call(r).then(function(t){for(var e=t.body,n=e.id.split(":"),r=n[3],o=[],i=0;i<e.seq.length;i++)o.push({pos:+r+i,sequence:e.seq[i]});return o})}return new Promise(function(t,e){t([])})});return o(e).getset("limit",150),e},c={gene:i,sequence:s,transcript:a};e.exports=n=c},{"tnt.api":27,"tnt.board":29}],57:[function(t,e,n){var r=t("tnt.api"),o=(t("./layout.js"),t("tnt.board")),i=function(){var t=o.track.feature().layout(o.track.layout.genome()).index(function(t){return t.key});return t.create(function(e){
var n=this,r=t.scale(),o=e.append("g").attr("transform",function(e){return"translate("+r(e.start)+","+t.layout().gene_slot().slot_height*e.slot+")"});o.append("line").attr("x1",0).attr("y1",~~(t.layout().gene_slot().gene_height/2)).attr("x2",function(t){return r(t.end)-r(t.start)}).attr("y2",~~(t.layout().gene_slot().gene_height/2)).attr("fill","none").attr("stroke",n.color()).attr("stroke-width",2).transition().duration(500).attr("stroke",function(e){return t.color()(e)}),e.each(function(t){if(t.exons)for(var e=0;e<t.exons.length;e++)t.exons[e].slot=t.slot});var i=o.selectAll(".exons").data(function(t){return t.exons||[]},function(t){return t.start});i.enter().append("rect").attr("class","tnt_exons").attr("x",function(t){return r(t.start+t.offset)-r(t.start)}).attr("y",0).attr("width",function(t){return r(t.end)-r(t.start)}).attr("height",t.layout().gene_slot().gene_height).attr("fill",n.color()).attr("stroke",n.color()).transition().duration(500).attr("stroke",function(e){return t.color()(e)}).attr("fill",function(e){return e.coding?t.color()(e):e.coding===!1?n.color():t.color()(e)}),o.append("text").attr("class","tnt_name").attr("x",0).attr("y",25).attr("fill",n.color()).text(function(e){return t.layout().gene_slot().show_label?e.display_label:""}).style("font-weight","normal").transition().duration(500).attr("fill",function(e){return t.color()(e)})}),t.distribute(function(e){var n=t.scale(),r=e.select("g").transition().duration(200).attr("transform",function(e){return"translate("+n(e.start)+","+t.layout().gene_slot().slot_height*e.slot+")"});r.selectAll("rect").attr("height",t.layout().gene_slot().gene_height),r.selectAll("line").attr("x2",function(t){return n(t.end)-n(t.start)}).attr("y1",~~(t.layout().gene_slot().gene_height/2)).attr("y2",~~(t.layout().gene_slot().gene_height/2)),r.select("text").text(function(e){return t.layout().gene_slot().show_label?e.display_label:""})}),t.move(function(e){var n=t.scale(),r=e.select("g").attr("transform",function(e){return"translate("+n(e.start)+","+t.layout().gene_slot().slot_height*e.slot+")"});r.selectAll("line").attr("x2",function(t){return n(t.end)-n(t.start)}).attr("y1",~~(t.layout().gene_slot().gene_height/2)).attr("y2",~~(t.layout().gene_slot().gene_height/2)),r.selectAll("rect").attr("width",function(t){return n(t.end)-n(t.start)}),r.selectAll(".tnt_exons").attr("x",function(t){return n(t.start+t.offset)-n(t.start)})}),t},a=function(){var t={fontsize:10,sequence:function(t){return t.sequence}},e=o.track.feature().index(function(t){return t.pos});r(e).getset(t);return e.create(function(n){var r=this,o=e.scale();n.append("text").attr("fill",r.color()).style("font-size",t.fontsize+"px").attr("x",function(e){return o(e.pos)-t.fontsize/2+1}).attr("y",function(t){return~~(r.height()/2)+5}).style("font-family",'"Lucida Console", Monaco, monospace').text(t.sequence).transition().duration(500).attr("fill",e.color())}),e.move(function(n){var r=e.scale();n.select("text").attr("x",function(e){return r(e.pos)-t.fontsize/2+1})}),e},s=function(){var t=o.track.feature().layout(o.track.layout.genome()).index(function(t){return t.id});return t.create(function(e){var n=this,r=t.scale();e.append("rect").attr("x",function(t){return r(t.start)}).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot}).attr("width",function(t){return r(t.end)-r(t.start)}).attr("height",t.layout().gene_slot().gene_height).attr("fill",n.color()).transition().duration(500).attr("fill",function(e){return void 0===e.color?t.color():e.color}),e.append("text").attr("class","tnt_name").attr("x",function(t){return r(t.start)}).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot+25}).attr("fill",n.color()).text(function(e){return t.layout().gene_slot().show_label?e.display_label:""}).style("font-weight","normal").transition().duration(500).attr("fill",function(){return t.color()})}),t.distribute(function(e){e.select("rect").transition().duration(500).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot}).attr("height",t.layout().gene_slot().gene_height),e.select("text").transition().duration(500).attr("y",function(e){return t.layout().gene_slot().slot_height*e.slot+25}).text(function(e){return t.layout().gene_slot().show_label?e.display_label:""})}),t.move(function(e){var n=t.scale();e.select("rect").attr("x",function(t){return n(t.start)}).attr("width",function(t){return n(t.end)-n(t.start)}),e.select("text").attr("x",function(t){return n(t.start)})}),t},c=function(){var t,e,n,r,o=function(t,e,n,r){return t+" "+e+":"+n+"-"+r},i={};return i.reset=function(){},i.plot=function(){},i.init=function(){e=void 0},i.mover=function(){var t=i.scale(),a=t.domain();e.select("text").text(o(r,n,~~a[0],~~a[1]))},i.update=function(i){n=i.chr,r=i.species;var a=this,s=a.g,c=t.domain();void 0===e&&(e=s,e.append("text").text(o(r,n,~~c[0],~~c[1])))},i.scale=function(e){return arguments.length?(t=e,this):t},i.text=function(t){return arguments.length?(o=t,this):o},i},u={gene:s,sequence:a,transcript:i,location:c};e.exports=n=u},{"./layout.js":60,"tnt.api":27,"tnt.board":29}],58:[function(t,e,n){var r=t("tnt.api"),o=t("tnt.board");o.track.data.genome=t("./data.js"),o.track.feature.genome=t("./feature"),o.track.layout.genome=t("./layout"),o.track.data.genome.ensembl=t("tnt.rest")().domain("rest.ensembl.org"),tnt_board_genome=function(){"use strict";var t=o.track.data.genome.ensembl,e=/^ENS\w+\d+$/,n={gene:void 0,xref_search:function(){},ensgene_search:function(){},context:0,rest:t},i=o().zoom_in(200).zoom_out(5e6).min(0),a=o.track().height(20).color("white").data(o.track.data.empty()).display(o.track.feature.genome.location()),s=o.track().height(0).color("white").data(o.track.data.empty()).display(o.track.feature.axis());i.add_track(a).add_track(s),i.species("human").chr(7).from(139424940).to(141784100),i._start=i.start;var c=function(e){if(void 0!==e){if(void 0!==e.gene)return void f(e);void 0===e.species?e.species=i.species():i.species(e.species),void 0===e.chr?e.chr=i.chr():i.chr(e.chr),void 0===e.from?e.from=i.from():i.from(e.from),void 0===e.to?e.to=i.to():i.to(e.to)}else{if(void 0!==i.gene())return void f({species:i.species(),gene:i.gene()});e={},e.species=i.species(),e.chr=i.chr(),e.from=i.from(),e.to=i.to()}var n=t.url().endpoint("info/assembly/:species/:region_name").parameters({species:e.species,region_name:e.chr});t.call(n).then(function(t){i.max(t.body.length),i._start()})},u=function(e,n){var r=t.url.homologues({id:e});t.call(r).then(function(t){var e=t.body.data[0].homologies;if(void 0!==n){var r=d(e);n(r)}})},l=function(t){return!!t.match(e)},f=function(e){if(l(e.gene))p(e.gene);else{var r=t.url().endpoint("xrefs/symbol/:species/:symbol").parameters({species:e.species,symbol:e.gene});t.call(r).then(function(t){var r=t.body;r=r.filter(function(t){return!t.id.indexOf("ENS")}),void 0!==r[0]&&p(r[0].id),n.xref_search(t,e.gene,e.species)})}},p=function(e){var r=t.url().endpoint("/lookup/id/:id").parameters({id:e});t.call(r).then(function(t){var e=t.body;n.ensgene_search(e);var r=~~((e.end-e.start)*(n.context/100));i.species(e.species).chr(e.seq_region_name).from(e.start-r).to(e.end+r),i.start({species:e.species,chr:e.seq_region_name,from:e.start-r,to:e.end+r})})},d=function(t){var e=/ortholog/,n=/paralog/,r=t.filter(function(t){return t.type.match(e)}),o=t.filter(function(t){return t.type.match(n)});return{orthologues:r,paralogues:o}},h=r(i).getset(n);return h.method({start:c,homologues:u}),i},e.exports=n=tnt_board_genome},{"./data.js":56,"./feature":57,"./layout":60,"tnt.api":27,"tnt.board":29,"tnt.rest":37}],59:[function(t,e,n){var r=t("tnt.board");r.genome=t("./genome"),e.exports=n=r},{"./genome":58,"tnt.board":29}],60:[function(t,e,n){var r=t("tnt.api"),o=function(){var t,e,n=[],o={expanded:{slot_height:30,gene_height:10,show_label:!0},collapsed:{slot_height:10,gene_height:7,show_label:!1}},i="expanded",a=function(r){var s=this;e=s.display().scale();for(var u=0;u<r.length;u++)null===r[u].external_name&&(r[u].external_name="");t=~~(s.height()/o.expanded.slot_height),a.keep_slots()&&l(r,n);var f=c(r);return o.collapsed.needed_slots=f,o.expanded.needed_slots=f,i=a.fixed_slot_type()?a.fixed_slot_type():f>t?"collapsed":"expanded",a.on_layout_run()(o,i),n=r,r},s=function(){return o[i]},c=function(e){for(var n=[],r=e,o=0,i=0;i<e.length;i++)e[i].slot>o&&e[i].slot<t&&(o=e[i].slot);for(var a=0;a<r.length;a++){var s=p(n),c=r[a];if(void 0!==c.slot&&c.slot<t&&u(c,s[c.slot]))n.push(c);else for(var l=0;;){if(u(c,s[l])){c.slot=l,n.push(c),l>o&&(o=l);break}l++}}return o+1},u=function(t,n){if(void 0===n)return!0;for(var r=0;r<n.length;r++){var o=n[r];if(t.id!==o.id){var i=8*o.display_label.length+e(o.start),a=e(o.start),s=e(o.end)>i?e(o.end):i,c=8*t.display_label.length+e(t.start),u=e(t.start),l=e(t.end)>c?e(t.end):c;if(a>=u&&l>=a||u>=a&&s>=u)return!1}}return!0},l=function(t,e){for(var n=f(e),r=0;r<t.length;r++)void 0!==n[t[r].id]&&(t[r].slot=n[t[r].id])},f=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r.id]=r.slot}return e},p=function(t){for(var e=[],n=0;n<t.length;n++)void 0===e[t[n].slot]&&(e[t[n].slot]=[]),e[t[n].slot].push(t[n]);return e};r(a).getset("elements",function(){}).getset("on_layout_run",function(){}).getset("fixed_slot_type").getset("keep_slots",!0).method({gene_slot:s});return a.fixed_slot_type.check(function(t){return"collapsed"===t||"expanded"===t}),a};e.exports=n=o},{"tnt.api":27}],61:[function(t,e,n){e.exports=tooltip=t("./src/tooltip.js")},{"./src/tooltip.js":64}],62:[function(t,e,n){e.exports=t(18)},{"./src/api.js":63}],63:[function(t,e,n){e.exports=t(19)},{}],64:[function(t,e,n){var r=t("tnt.api"),o=function(){"use strict";function t(e,n){if(n=n.toLowerCase(),null===e.parentNode)return void console.log("No more parents");var r=e.parentNode.tagName;return void 0!==r&&r.toLowerCase()===n?e.parentNode:t(e.parentNode,n)}var e,n=d3.behavior.drag(),o={position:"right",allow_drag:!0,show_closer:!0,fill:function(){throw"fill is not defined in the base object"},width:180,id:1},i=function(r,a){n.origin(function(){return{x:parseInt(d3.select(this).style("left")),y:parseInt(d3.select(this).style("top"))}}).on("drag",function(){o.allow_drag&&d3.select(this).style("left",d3.event.x+"px").style("top",d3.event.y+"px")});var s=t(this,"div");if(void 0!==s){e=d3.select(s).append("div").attr("class","tnt_tooltip").classed("tnt_tooltip_active",!0).call(n),d3.select("#tnt_tooltip_"+o.id).remove(),null===d3.event&&a&&(d3.event=a);var c=d3.mouse(s);d3.event=null;var u=0;return"left"===o.position&&(u=o.width),e.attr("id","tnt_tooltip_"+o.id),e.style("left",c[0]-u+"px").style("top",c[1]+"px"),o.show_closer&&e.append("div").attr("class","tnt_tooltip_closer").on("click",function(){i.close()}),o.fill.call(e.node(),r),i}},a=r(i).getset(o);return a.check("position",function(t){return"left"===t||"right"===t},"Only 'left' or 'right' values are allowed for position"),a.method("close",function(){e&&e.remove()}),i};o.list=function(){var t=o();return t.fill(function(e){var n=d3.select(this),r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").text(e.header);var o=r.selectAll(".tnt_zmenu_row").data(e.rows).enter().append("tr").attr("class","tnt_zmenu_row");o.append("td").style("text-align","center").html(function(t,n){return e.rows[n].value}).each(function(e){void 0!==e.link&&d3.select(this).classed("link",1).on("click",function(e){e.link(e.obj),t.close.call(this)})})}),t},o.table=function(){var t=o();return t.fill(function(e){var n=d3.select(this),r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").attr("colspan",2).text(e.header);var o=r.selectAll(".tnt_zmenu_row").data(e.rows).enter().append("tr").attr("class","tnt_zmenu_row");o.append("th").attr("colspan",function(t,e){return""===t.value?2:1}).attr("class",function(t){return""===t.value?"tnt_zmenu_inner_header":"tnt_zmenu_cell"}).html(function(t,n){return e.rows[n].label}),o.append("td").html(function(t,n){return"function"!=typeof e.rows[n].value?e.rows[n].value:void e.rows[n].value.call(this,t)}).each(function(t){""===t.value&&d3.select(this).remove()}).each(function(e){void 0!==e.link&&d3.select(this).classed("link",1).on("click",function(e){e.link(e.obj),t.close.call(this)})})}),t},o.plain=function(){var t=o();return t.fill(function(e){var n=d3.select(this),r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").text(e.header),e.body&&r.append("tr").attr("class","tnt_zmenu_row").append("td").style("text-align","center").html(e.body)}),t},e.exports=n=o},{"tnt.api":62}],65:[function(t,e,n){e.exports=t("./src/index.js")},{"./src/index.js":66}],66:[function(t,e,n){var r=t("./utils.js");r.reduce=t("./reduce.js"),e.exports=n=r},{"./reduce.js":67,"./utils.js":68}],67:[function(t,e,n){var r=function(){var t=5,e="val",n=function(t,e){return e>t?.2*e>=e-t:.2*t>=t-e},r=function(t){return t},o=function(t){if(!t.length)return t;var e=s(t),n=r(e);return n},i=function(t,n){if(n.sort(function(t,n){return t[e]-n[e]}),n.length%2)t[e]=n[~~(n.length/2)][e];else{var r=~~(n.length/2)-1;t[e]=(n[r][e]+n[r+1][e])/2}return t},a=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s=function(e){if(0===t)return e;for(var n=[],r=0;r<e.length;r++){var o=t>r?0:r-t,s=r>e.length-t?e.length:r+t;n[r]=i(a(e[r]),e.slice(o,s+1))}return n};return o.reducer=function(t){return arguments.length?(r=t,o):r},o.redundant=function(t){return arguments.length?(n=t,o):n},o.value=function(t){return arguments.length?(e=t,o):e},o.smooth=function(e){return arguments.length?(t=e,o):t},o},o=function(){var t=r().value("start"),e="end",n=function(n,r){return{object:{start:n.object[t.value()],end:r[e]},value:r[e]}};return t.reducer(function(r){for(var o=t.value(),i=t.redundant(),a=[],s={object:r[0],value:r[0][e]},c=1;c<r.length;c++)i(r[c][o],s.value)?s=n(s,r[c]):(a.push(s.object),s.object=r[c],s.value=r[c].end);return a.push(s.object),a}),r.join=function(e){return arguments.length?(n=e,t):n},r.value2=function(n){return arguments.length?(e=n,t):e},t},i=function(){var t=r();return t.reducer(function(e){for(var n=t.redundant(),r=t.value(),o=[],i=e[0],a=1;a<e.length-1;a++)n(e[a][r],i[r])||(o.push(i),i=e[a]);return o.push(i),o.push(e[e.length-1]),o}),t};e.exports=r,e.exports.line=i,e.exports.block=o},{}],68:[function(t,e,n){e.exports={iterator:function(t){var e=t||0,n=function(){return e++};return n},script_path:function(t){var e=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp(e+"$"),r=new RegExp("(.*)"+e+"$"),o=document.getElementsByTagName("script"),i="";if(void 0!==o)for(var a in o)if(o[a].src&&o[a].src.match(n))return o[a].src.replace(r,"$1");return i},defer_cancel:function(t,e){var n,r=function(){var r=Array.prototype.slice.call(arguments),o=this;clearTimeout(n),n=setTimeout(function(){t.apply(o,r)},e)};return r}}},{}],69:[function(t,e,n){function r(t,e){var n=5;t.map(function(t){t.label="",t._px=e(t.pos)}),t.sort(function(t,e){return t.pos-e.pos});for(var r=[],o=[t[0]],i=t[0],a=1;a<t.length;a++)t[a]._px-i._px<n?(o.push(t[a]),i=t[a]):(r.push(o),o=[t[a]],i=t[a]);r.push(o);for(var s=0;s<r.length;s++)if(r[s].length>1){var c=r[s][~~(r[s].length/2)];c.label=r[s].length}}e.exports=n=r},{}],70:[function(t,e,n){var r={"protein coding":d3.rgb("#A00000"),pseudogene:d3.rgb("#666666"),"processed transcript":d3.rgb("#0033FF"),ncRNA:d3.rgb("#8B668B"),antisense:d3.rgb("#CBDD8B"),"TR gene":d3.rgb("#AA00AA"),"non coding transcript":d3.rgb("#8B668B")},o={protein_coding:"protein coding",pseudogene:"pseudogene",processed_pseudogene:"pseudogene",transcribed_processed_pseudogene:"pseudogene",unprocessed_pseudogene:"pseudogene",polymorphic_pseudogene:"pseudogene",unitary_pseudogene:"pseudogene",transcribed_unprocessed_pseudogene:"pseudogene",TR_V_pseudogene:"pseudogene",processed_transcript:"processed transcript",TEC:"processed transcript",sense_overlapping:"processed transcript",miRNA:"ncRNA",lincRNA:"ncRNA",misc_RNA:"ncRNA",snoRNA:"ncRNA",snRNA:"ncRNA",rRNA:"ncRNA",antisense:"antisense",sense_intronic:"antisense",TR_V_gene:"TR gene",TR_C_gene:"TR gene",TR_J_gene:"TR gene",TR_D_gene:"TR gene",retained_intron:"non coding transcript",nonsense_mediated_decay:"protein coding"};e.exports=n={color:r,legend:o}},{}],71:[function(t,e,n){var r=function(){"use strict";var t,e,n=!0,r=!0,o="",i="#586471",a=function(r,o){e=r;var i=d3.select(o).append("div").attr("class","tnt_nav_wrapper"),s=i.append("div").attr("class","tnt_nav_pane").style("display",function(){return n?"inline-block":"none"});s.append("span").text("Human Chr: "+r.chr());s.append("i").attr("title","go left").attr("class","cttvGenomeBrowserIcon fa fa-arrow-circle-left fa-2x").on("click",a.left),s.append("i").attr("title","zoom out").attr("class","cttvGenomeBrowserIcon fa fa-search-plus fa-2x").on("click",a.zoomOut),s.append("i").attr("title","zoom in").attr("class","cttvGenomeBrowserIcon fa fa-search-minus fa-2x").on("click",a.zoomIn),s.append("i").attr("title","go right").attr("class","cttvGenomeBrowserIcon fa fa-arrow-circle-right fa-2x").on("click",a.right),s.append("i").attr("title","reload location").attr("class","cttvGenomeBrowserIcon fa fa-refresh fa-lt").on("click",function(){e.start(t)});t||(t=void 0!==e.gene()?{species:e.species(),gene:e.gene()}:{species:e.species(),chr:e.chr(),from:e.from(),to:e.to()})};return a.left=function(){e.scroll(1.5)},a.right=function(){e.scroll(-1.5)},a.zoomIn=function(){e.zoom(.5)},a.zoomOut=function(){e.zoom(1.5)},a.show_options=function(t){return n=t,this},a.show_title=function(t){return r=t,this},a.title=function(t){return arguments.length?(o=t,this):o},a.foreground_color=function(t){return arguments.length?(i=t,this):i},a.orig=function(e){return arguments.length?(t=e,this):t},a};e.exports=n=r},{}],72:[function(t,e,n){var r=t("rsvp"),o={},i=function(){function t(t,e,n){"string"==typeof t&&(t=[t]);var r={target:t,size:1e3,datasource:e,fields:["target.gene_info","disease.efo_info","variant","evidence","type"]};return void 0!==n&&(r.disease=[n],r.expandefo=!1),r}var e={ensembl:void 0,cttv:void 0},n={},i={},a={};a.rare=function(n,r){var o,i;return r?(o=t(n,["uniprot","eva"],r),i=e.cttv.url.filterby(),e.cttv.call(i,o).then(function(t){return s(t),a.rare(n)})):(o=t(n,["uniprot","eva"]),i=e.cttv.url.filterby(),e.cttv.call(i,o).then(c).then(p).then(u).then(l))},a.common=function(n,r){var o,i;return r?(o=t(n,["gwas_catalog"],r),i=e.cttv.url.filterby(),e.cttv.call(i,o).then(function(t){return s(t),a.common(n)})):(o=t(n,["gwas_catalog"]),i=e.cttv.url.filterby(),e.cttv.call(i,o).then(d).then(p).then(f).then(l))};var s=function(t){for(var e=0;e<t.body.data.length;e++){var n=t.body.data[e],r=n.variant.id[0].split("/").pop();i[r]=1}},c=function(t){for(var e=0;e<t.body.data.length;e++){var r=t.body.data[e];if("genetic_association"===r.type){var o,a=r.variant.id[0],s=a.split("/").pop(),c=r.evidence.gene2variant.provenance_type.database;c.dbxref&&(o=c.dbxref.url.split("/").pop());var u=r.disease.efo_info,l=r.target.gene_info,f=[];r.evidence.variant2disease.provenance_type.literature&&(f=r.evidence.variant2disease.provenance_type.literature.references.map(function(t){return t.lit_id.split("/").pop()})),void 0===n[s]&&(n[s]={},n[s].target=l,n[s].name=s,n[s].efo=[],n[s].associations=[],n[s].clinvarId=o),i[s]&&(n[s].highlight=!0);var p={efo:u.efo_id,label:u.label,name:s,target:l.symbol,pmids:f};n[s].associations.push(p),n[s].efo.push(u.efo_id)}else console.error(r)}var d=Object.keys(n);return d},u=function(t){for(var e=0;e<t.length;e++){var r=t[e];for(var i in r.body){var a=r.body[i];if(o[i]||(o[i]=a),a.mappings.length){var s=n[i];s.pos=a.mappings[0].start,s.val=1}else delete n[i]}}return n},l=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);var o=d3.extent(e,function(t){return t.pos});return{extent:o,snps:n}},f=function(t){for(var e=function(t){for(var e=1/0,n=t.length;n--;){var r=+t[n].pvalue;e>r&&(e=r)}return e},r=0;r<t.length;r++){var i=t[r];for(var a in i.body)if(i.body.hasOwnProperty(a)){var s=i.body[a],c=n[a];c.pos=s.mappings[0].start,c.val=1-e(c.study),o[a]||(o[a]=s)}}return n},p=function(t){for(var n={},i=0,a=[],s=0;s<t.length;s++){var c=t[s];o[c]?(n[c]=o[c],i++):a.push(c)}var u=[{body:n}];if(a.length){for(var l=200,f=u,p=0;p<a.length;p+=l){var d=a.slice(p,p+l),h=e.ensembl.url().endpoint("/variation/:species").parameters({species:"human"});f.push(e.ensembl.call(h,{ids:d}))}return r.all(f)}return u},d=function(t){for(var e=0;e<t.body.data.length;e++){var r=t.body.data[e],o=r.variant.id[0],a=r.disease.efo_info,s=o.split("/").pop(),c=r.target.gene_info;void 0===n[s]&&(n[s]={},n[s].target=c,n[s].study=[],n[s].name=s,n[s].efo=[]),i[s]&&(n[s].highlight=!0),n[s].efo.push(a.efo_id),n[s].study.push({pmid:r.evidence.variant2disease.provenance_type.literature.references[0].lit_id,pvalue:r.evidence.variant2disease.resource_score.value,efo:a.efo_id,efo_label:a.label})}var u=Object.keys(n);return u};return a.ensemblRestApi=function(t){return arguments.length?(e.ensembl=t,this):e.ensembl},a.cttvRestApi=function(t){return arguments.length?(e.cttv=t,this):e.cttv},a};e.exports=n=i},{rsvp:23}],73:[function(t,e,n){var r=t("./navigation.js"),o=t("./tooltips.js"),i=t("./aggregation.js"),a=t("rsvp"),s=t("tnt.api"),c=t("./biotypes.js"),u=t("cttv.api"),l=t("./pipelines.js"),f=function(){"use strict";function t(t){var e=t.biotype,n=c.color[c.legend[e]];t.featureColor=n;for(var r=0;r<t.exons.length;r++)t.exons[r].featureColor=n}var e,n,f,p,d,h,v={links_prefix:"https://www.targetvalidation.org",show_links:!0,show_snps:!0,show_nav:!0,cttvRestApi:u().prefix("https://www.targetvalidation.org/api/"),efo:void 0},g={},_=r(),m={TargetDisease:"#FF0000",Target:"#3e9999",Disease:"#FFD400",Other:"#cccccc"},y=0,b=function(e,r){k(r),h=e,e.zoom_in(150),p=tnt.board.track.data.genome.ensembl,_.show_options(v.show_nav);var s=o().cttvRestApi(v.cttvRestApi).ensemblRestApi(p).prefix(v.links_prefix).view(e),u=tnt.board.track.data.genome.gene(),d=u.retriever();u.retriever(function(n){return d(n).then(function(r){for(var o=[],i=0;i<r.length;i++){var a=r[i];a.id!==e.gene()&&(a.key=a.id,a.isGene=!0,a.exons=[{start:a.start,end:a.end,coding:!0,offset:0,isGene:!0}],o.push(a))}var s=p.url().endpoint("/lookup/id/:id").parameters({id:e.gene(),expand:!0});return p.call(s).then(function(e){for(var r=e.body,i=tnt.board.track.data.genome.transcript().gene2Transcripts(r),a=0;a<i.length;a++){var s=i[a];w([n.from,n.to],[s.start,s.end])&&o.push(s)}return o.map(t),x(o),o})})});var w=function(t,e){return t[0]<e[0]&&t[1]>e[1]?!0:t[0]>e[0]&&t[1]<e[1]?!0:t[0]>e[0]&&t[1]>e[1]?!0:t[1]>e[0]&&t[1]<e[1]},x=function(t){var n=t.map(function(t){return c.legend[t.biotype]}),r=t.filter(function(t){return t.gene?t.gene.id===e.gene():t.id===e.gene()}).map(function(t){return c.legend[t.biotype]});n=n.concat(r);for(var o={},i=0;i<n.length;i++)o[n[i]]=1;var a=[];for(var s in o)o.hasOwnProperty(s)&&a.push(s);var u=I.selectAll(".tnt_biotype_legend").data(a,function(t){return t}),l=u.enter().append("div").attr("class","tnt_biotype_legend").style("display","inline");l.append("div").style("display","inline-block").style("margin","0px 5px 0px 15px").style("width","10px").style("height","10px").style("border","1px solid #000").style("background",function(t){return c.color[t]}),l.append("text").text(function(t){return t}),u.exit().remove()},j=function(t){var e=p.url().endpoint("overlap/region/:species/:region").parameters({species:t.species,region:t.chr+":"+t.from+"-"+t.to,feature:["gene"]});return p.call(e).then(function(t){return t.body})},T=tnt.board.track.data.async().retriever(function(t){return j(t).then(function(t){for(var e=[],n=[],r=0;r<t.length;r++)n.push(t[r].id);var o=l().ensemblRestApi(p).cttvRestApi(v.cttvRestApi).rare(n,v.efo);return e.push(o),a.all(e)}).then(function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];for(var o in r.snps)r.snps.hasOwnProperty(o)&&e.push(r.snps[o])}return e})}),R=function(t){return t.highlight&&e.gene()===t.target.geneid?m.TargetDisease:t.highlight?m.Disease:e.gene()===t.target.geneid?m.Target:m.Other},E=tnt.board.track.feature.pin().domain([.3,1.2]).color(R).index(function(t){return t.name}).on("click",s.snp).layout(tnt.board.track.layout().elements(function(t){i(t,E.scale())})),P=tnt.board.track().label("Variants in rare diseases").height(60).color("white").display(E).data(T),O=tnt.board.track.data.async().retriever(function(t){return j(t).then(function(t){for(var e=[],n=[],r=0;r<t.length;r++)n.push(t[r].id);var o=(t[r],l().ensemblRestApi(p).cttvRestApi(v.cttvRestApi).common(n,v.efo));return e.push(o),a.all(e)}).then(function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];for(var o in r.snps)r.snps.hasOwnProperty(o)&&e.push(r.snps[o])}return e})}),C=tnt.board.track.feature.pin().domain([.3,1.2]).index(function(t){return t.name}).color(R).on("click",s.snp).layout(tnt.board.track.layout().elements(function(t){i(t,E.scale())})),q=tnt.board.track().label("Variants in common diseases").height(60).color("white").display(C).data(O),S=tnt.board.track().label("Genes / Transcripts").height(20).color("#FFFFFF").display(tnt.board.track.feature.block()).data(tnt.board.track.data.sync().retriever(function(){return[]})),N=tnt.board.track().height(y).color("#FFFFFF").display(tnt.board.track.feature.genome.transcript().color(function(t){return t.featureColor}).on("click",s.gene)).data(u);N.display().layout().keep_slots(!1).fixed_slot_type("expanded").on_layout_run(function(t,n){var r=t.expanded.needed_slots*t.expanded.slot_height;r!==y&&(y=200>r?200:r,y=r,N.height(r),e.tracks(e.tracks()))});var z=tnt.board.track().label("sequence").height(30).color("white").display(tnt.board.track.feature.genome.sequence()).data(tnt.board.track.data.genome.sequence().limit(200));b.start(),f=d3.select(r).append("div").style("width","950px"),h(r);var I=d3.select(r).append("div").attr("class","tnt_legend_div");I.append("text").attr("class","tnt_legend_header").text("Gene legend:"),d3.selectAll("tnt_biotype").data(N.data().elements()),n=d3.select(r).append("div").attr("class","tnt_legend_div"),n.append("text").attr("class","tnt_legend_header").text("SNPs legend:"),v.show_snps&&(g.common_snps=q,h.add_track(q),g.rare_snps=P,h.add_track(P)),g.gene=N,h.add_track(z).add_track(S).add_track(N);var M=d3.select(r).append("div").attr("class","tnt_links_pane").style("display",function(){return v.show_links?"block":"none"});M.append("span").text("Open in Ensembl");M.append("i").attr("title","open region in ensembl").attr("class","cttvGenomeBrowserIcon fa fa-external-link fa-2x").on("click",function(){var t=A();window.open(t,"_blank")})},w=function(){var t,e=p.url().endpoint("lookup/id/:id").parameters({id:h.gene()}),n=p.call(e).then(function(t){return t.body});if(v.efo){var r=v.cttvRestApi.url.disease({code:v.efo});t=v.cttvRestApi.call(r).then(function(t){return t.body})}var o;o=v.show_snps?l().ensemblRestApi(p).cttvRestApi(v.cttvRestApi).rare(h.gene()):new Promise(function(t,e){t({})});var i;i=v.show_snps?l().ensemblRestApi(p).cttvRestApi(v.cttvRestApi).common(h.gene()):new Promise(function(t,e){t({})}),a.all([n,i,o,t]).then(function(t){var e=t[3],n=t[0];x(n,e);var r=[n.start,n.end],o=t[1].extent,i=t[2].extent,a=o?o[1]-o[0]:0,s=i?i[1]-i[0]:0,c=r[1]-r[0],u=o?~~(o[0]-a/5):1/0,l=o?~~(o[1]+a/5):-(1/0),p=i?~~(i[0]-s/5):1/0,d=i?~~(i[1]+s/5):-(1/0),v=~~(r[0]-c/5),g=~~(r[1]+c/5),m=d3.min([u||1/0,v,p||1/0]),y=d3.max([l||0,g,d||0]);h.chr(n.seq_region_name),_.orig({from:m,to:y}),h.start({from:m,to:y}),_(h,f.node())})},x=function(t,r){var o=[];r&&(o.push({label:"SNP in "+t.display_name+" associated with "+r.label,color:m.TargetDisease}),o.push({label:"SNP associated with "+r.label+" in other genes",color:m.Disease})),o.push({label:"SNP in "+t.display_name,color:m.Target}),o.push({label:"Other SNP",color:m.Other}),e=n.selectAll(".tnt_snp_legend").data(o).enter().append("div").attr("class","tnt_snp_legend"),e.append("div").attr("class","tnt_legend_item").style("display","inline-block").style("margin","0px 5px 0px 15px").style("width","10px").style("height","10px").style("border","1px solid #000").style("border-radius","5px").style("background",function(t){return t.color}),e.append("text").text(function(t){return t.label})};s(b).getset(v).method("start",w).method("track",function(t){switch(t){case"gene":return g.gene;case"common_snps":return g.common_snps;case"rare_snps":return g.rare_snps}});var k=function(t){d=d3.select(t).attr("id")},A=function(){var t="http://www.ensembl.org/"+h.species()+"/Location/View?r="+h.chr()+"%3A"+h.from()+"-"+h.to();return t};return b};e.exports=n=f},{"./aggregation.js":69,"./biotypes.js":70,"./navigation.js":71,"./pipelines.js":72,"./tooltips.js":74,"cttv.api":3,rsvp:23,"tnt.api":24}],74:[function(t,e,n){var r=t("tnt.tooltip"),o=t("tnt.api"),i=function(){var t={cttvRestApi:void 0,ensemblRestApi:void 0,prefix:void 0,view:void 0},e=1,n={},i=o(n).getset(t),a=function(e,n){var r={};if(r.header=e.name,r.rows=[],n&&(r.rows.push({label:"Ancestral allele",value:n.ancestral_allele}),r.rows.push({label:"Allele string",value:n.mappings[0].allele_string}),r.rows.push({label:"Most severe consequence",value:n.most_severe_consequence}),n.MAF&&r.rows.push({label:"MAF",value:n.MAF}),r.rows.push({label:"Location",link:function(e){t.view.start({from:e.pos-50,to:e.pos+50})},obj:e,value:"Jump to sequence"}),r.rows.push({label:"target",value:e.target.symbol})),e.associations&&e.associations.length){r.rows.push({label:"Associations",value:""});for(var o=0;o<e.associations.length;o++){var i=e.associations[o];r.rows.push({label:"<a href="+t.prefix+"/evidence/"+e.target.geneid+"/"+i.efo.split("/").pop()+">"+i.label+"</a>",value:i.pmids.length+(1===i.pmids.length?" article":" articles")+"  <a href='http://europepmc.org/search?query="+i.pmids.map(function(t){return"EXT_ID:"+t}).join("%20OR%20")+"' target=_blank <i class='fa fa-newspaper-o fa-lg'></i></a>"})}}if(e.study&&e.study.length){r.rows.push({label:"Associations",value:""});for(var o=0;o<e.study.length;o++)r.rows.push({label:"<a href='"+t.prefix+"/evidence/"+e.target.geneid+"/"+e.study[o].efo.split("/").pop()+"'>"+e.study[o].efo_label+"</a>",value:parseFloat(e.study[o].pvalue).toPrecision(1)+" <a target=_blank href='http://europepmc.org/abstract/med/"+e.study[o].pmid.split("/").pop()+"'><i class='fa fa-newspaper-o fa-lg'></i></a>"})}return r};return i.method("snp",function(n){var r=tnt.tooltip.table().width(250).id(e),o=d3.event,i=this,s=tnt.tooltip.plain().id(e),c=t.ensemblRestApi.url().endpoint("/variation/:species").parameters({species:"human"});t.ensemblRestApi.call(c,{ids:[n.name]})["catch"](function(){console.log("NO VARIANT INFORMATION FOR THIS SNP")}).then(function(t){var e=a(n,t.body[n.name]);r.call(i,e,o)}),s.call(i,{header:n.name,body:"<i class='fa fa-spinner fa-2x fa-spin'></i>"})}),i.method("gene",function(n){var o=function(e,n,r){var o={};o.header=(e.display_name||e.external_name)+" ("+e.id+")",o.rows=[];var i,a;return n&&n.data&&n.data.length>0&&(i="<a href='"+t.prefix+"/target/"+e.id+"/associations'>"+n.data.length+" disease associations</a> ",a="<a href='"+t.prefix+"/target/"+e.id+"'>View CTTV profile</a>"),o.rows.push({label:"Gene",value:""}),o.rows.push({label:"Biotype",value:e.biotype}),o.rows.push({label:"Location",value:"<a target='_blank' href='http://www.ensembl.org/Homo_sapiens/Location/View?db=core;g="+e.id+"'>"+e.seq_region_name+":"+e.start+"-"+e.end+"</a>"}),void 0!==i&&o.rows.push({label:"Associations",value:i}),void 0!==a&&o.rows.push({label:"CTTV Profile",value:a}),o.rows.push({label:"Description",value:e.description}),r&&(o.rows.push({label:"Transcript",value:""}),o.rows.push({label:"Name",value:r.display_name}),o.rows.push({label:"ID",value:"<a target='_blank' href='http://www.ensembl.org/Homo_sapiens/Transcript/Summary?db=core;t="+r.id+"'>"+r.id+"</a>"
}),o.rows.push({label:"biotype",value:r.biotype})),o},i=r.table().id(e),a=d3.event,s=this,c=r.plain().id(e),u=t.cttvRestApi.url.associations({target:n.isGene?n.id:n.gene.id,datastructure:"flat",filterbyscorevalue_min:0,stringency:1});t.cttvRestApi.call(u)["catch"](function(t){var e=o(n);i.call(s,e,a)}).then(function(t){var e;e=n.isGene?o(n,t.body):o(n.gene,t.body,n),i.call(s,e,a)}),c.call(s,{header:n.isGene?n.external_name+" ("+n.gene_id+")":n.gene.display_name+"("+n.gene.id+")",body:"<i class='fa fa-spinner fa-2x fa-spin'></i>"})}),n};e.exports=n=i},{"tnt.api":24,"tnt.tooltip":61}]},{},[1]);